<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>PointFree Episode 17: Styling with Overture | Kayouyou&#39;s Den</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://kayouyou.github.io/favicon.ico?v=1663223563046">
<link rel="stylesheet" href="https://kayouyou.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="



Introduction




 Pre-refactor




Magic numbers




Reusable margins




Reusable stack view styles




Reusable bu..." />
    <meta name="keywords" content="PointFree" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://kayouyou.github.io">
        <img src="https://kayouyou.github.io/images/avatar.png?v=1663223563046" class="site-logo">
        <h1 class="site-title">Kayouyou&#39;s Den</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      The wise build bridges, while the foolish build barriers.
    </div>
    <div class="site-footer">
      è±«ICPå¤‡2021012281å·-1  | <a class="rss" href="https://kayouyou.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">PointFree Episode 17: Styling with Overture</h2>
            <div class="post-date">2021-11-07</div>
            
            <div class="post-content" v-pre>
              <!-- vscode-markdown-toc -->
<ul>
<li>
<ol>
<li><a href="#Introduction">Introduction</a></li>
</ol>
</li>
<li>
<ol start="2">
<li><a href="#Pre-refactor"> Pre-refactor</a></li>
</ol>
</li>
<li>
<ol start="3">
<li><a href="#Magicnumbers">Magic numbers</a></li>
</ol>
</li>
<li>
<ol start="4">
<li><a href="#Reusablemargins">Reusable margins</a></li>
</ol>
</li>
<li>
<ol start="5">
<li><a href="#Reusablestackviewstyles">Reusable stack view styles</a></li>
</ol>
</li>
<li>
<ol start="6">
<li><a href="#Reusablebuttonstyles">Reusable button styles</a></li>
</ol>
</li>
<li>
<ol start="7">
<li><a href="#Whatsthepoint">Whatâ€™s the point?</a></li>
</ol>
</li>
</ul>
<!-- vscode-markdown-toc-config
	numbering=true
	autoSave=true
	/vscode-markdown-toc-config -->
<!-- /vscode-markdown-toc -->
<!-- # PointFree Episode 17: Styling with Overture -->
<h2 id="1-a-nameintroductionaintroduction">1. <a name='Introduction'></a>Introduction</h2>
<p>ä»Šå¤©çš„èŠ‚ç›®æ˜¯ä¸€ç§æ–°çš„å½¢å¼ï¼Œæˆ‘ä»¬å°†ä¸€äº›çœŸå®ä¸–ç•Œçš„ä»£ç è¿›è¡Œä¿®æ”¹ï¼Œä½¿å…¶å˜å¾—æ›´å¥½ã€‚åœ¨é‚£ä¸€é›†ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç®€å•çš„å‡½æ•°æ¥æ ·å¼åŒ–<strong>UIKit</strong>ç»„ä»¶ï¼Œä»¥åŠå‡½æ•°ç»„åˆå¦‚ä½•å…è®¸æˆ‘ä»¬å°†è¿™äº›æ ·å¼åˆ†å±‚å¹¶å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚ä¹‹åï¼Œæˆ‘ä»¬åšäº†ä¸€ç³»åˆ—å…³äºsetter(1ã€2ã€3)çš„ç« èŠ‚ï¼Œåœ¨è¿™äº›ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†setteræ˜¯å¾ˆæ£’çš„ã€å¯ç»„åˆçš„å•ä½ï¼Œèƒ½å¤Ÿå¾ˆå¥½åœ°ä¸Swiftè¯­è¨€çº§åŠŸèƒ½é…åˆã€‚ç¨åï¼Œæˆ‘ä»¬è¿˜ä»‹ç»äº†ä¸ä½¿ç”¨æ“ä½œç¬¦çš„ç»„åˆï¼Œæˆ‘ä»¬å°†é‡ç‚¹æ”¾åœ¨ç»„åˆä¸Šï¼Œå› ä¸ºç»„åˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„åŸºæœ¬ç‰¹æ€§ï¼Œæˆ‘ä»¬ä¸åº”è¯¥è®©å®šåˆ¶æ“ä½œç¬¦é˜»ç¢ä½¿ç”¨ç»„åˆã€‚</p>
<p>æˆ‘ä»¬å°†æŠŠæ‰€æœ‰è¿™äº›æƒ³æ³•æ•´åˆåˆ°ä¸€ä¸ªå¤§çš„å±å¹•é‡æ„ä¸­ï¼Œè¿™ä¸ªå±å¹•é‡æ„æ¥è‡ªä¸€ä¸ªå‡è®¾çš„ã€å¾…å®šçš„ã€é¥è¿œæœªæ¥çš„<strong>Point-Free</strong> iOSåº”ç”¨ç¨‹åºã€‚</p>
<h2 id="2-a-namepre-refactora-pre-refactor">2. <a name='Pre-refactor'></a> Pre-refactor</h2>
<p>å±å¹•åŒ…å«ä¸€ä¸ªå¸¦æœ‰<strong>Point-Free</strong>å‰§é›†åˆ—è¡¨çš„è¡¨æ ¼è§†å›¾æ§åˆ¶å™¨ã€‚ å®ƒä»¥ä¸€ç§éå¸¸ç›´æ¥çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼ŒåŸºæœ¬ä¸Šæ²¡æœ‰æ·»åŠ ä»»ä½•æŠ½è±¡ã€‚å®ƒä»¥ä¸€ä¸ªè‡ªå®šä¹‰çš„ã€è®¢é˜…çš„â€œ<strong>call-out</strong>â€<strong>UITableViewCell</strong>å¼€å§‹ï¼Œå®ƒè¦æ±‚ç”¨æˆ·è€ƒè™‘è®¢é˜…æˆ‘ä»¬çš„è§†é¢‘ç³»åˆ—ã€‚å®ƒåŒ…å«ä¸€ç»„å­è§†å›¾ï¼Œè¿™äº›å­è§†å›¾åœ¨åˆå§‹åŒ–å¼ä¸­å†…è”å¸ƒå±€ã€‚</p>
<pre><code class="language-swift">final class SubscribeCalloutCell: UITableViewCell {
  private let bodyLabel = UILabel()
  private let buttonsStackView = UIStackView()
  private let containerView = UIView()
  private let loginButton = UIButton()
  private let orLabel = UILabel()
  private let rootStackView = UIStackView()
  private let subscribeButton = UIButton()
  private let titleLabel = UILabel()

  override init(style: UITableViewCellStyle, reuseIdentifier: String?) {
    super.init(style: style, reuseIdentifier: reuseIdentifier)

    self.selectionStyle = .none
    self.contentView.layoutMargins = .init(top: 24, left: 24, bottom: 24, right: 24)

    self.titleLabel.text = &quot;Subscribe to Point-Free&quot;
    self.titleLabel.font = UIFont.preferredFont(forTextStyle: .title3)

    self.bodyLabel.text = &quot;ğŸ‘‹ Hey there! See anything you like? You may be interested in subscribing so that you get access to these episodes and all future ones.&quot;
    self.bodyLabel.numberOfLines = 0
    self.bodyLabel.font = UIFont.preferredFont(forTextStyle: UIFontTextStyle.subheadline)

    self.containerView.backgroundColor = UIColor(white: 0.96, alpha: 1.0)
    self.containerView.layoutMargins = .init(top: 24, left: 24, bottom: 24, right: 24)
    self.containerView.translatesAutoresizingMaskIntoConstraints = false
    self.contentView.addSubview(self.containerView)

    self.rootStackView.alignment = .leading
    self.rootStackView.spacing = 24
    self.rootStackView.translatesAutoresizingMaskIntoConstraints = false
    self.rootStackView.axis = .vertical
    self.rootStackView.layoutMargins = .init(top: 24, left: 24, bottom: 24, right: 24)
    self.rootStackView.isLayoutMarginsRelativeArrangement = true
    self.rootStackView.addArrangedSubview(self.titleLabel)
    self.rootStackView.addArrangedSubview(self.bodyLabel)
    self.rootStackView.addArrangedSubview(self.buttonsStackView)
    self.contentView.addSubview(self.rootStackView)

    self.orLabel.text = &quot;or&quot;
    self.orLabel.font = UIFont.preferredFont(forTextStyle: .subheadline)

    self.subscribeButton.setTitle(&quot;See subscription options&quot;, for: .normal)
    self.subscribeButton.setTitleColor(.white, for: .normal)
    self.subscribeButton.titleLabel?.font = UIFont.preferredFont(forTextStyle: .subheadline).bolded
    self.subscribeButton.setBackgroundImage(.from(color: .pf_purple), for: .normal)
    self.subscribeButton.layer.cornerRadius = 6
    self.subscribeButton.layer.masksToBounds = true
    self.subscribeButton.contentEdgeInsets = .init(top: 8, left: 16, bottom: 8, right: 16)

    self.loginButton.setTitle(&quot;Login&quot;, for: .normal)
    self.loginButton.setTitleColor(.black, for: .normal)
    self.loginButton.titleLabel?.font = UIFont.preferredFont(forTextStyle: .subheadline).bolded

    self.buttonsStackView.spacing = 8
    self.buttonsStackView.alignment = .firstBaseline
    self.buttonsStackView.addArrangedSubview(self.subscribeButton)
    self.buttonsStackView.addArrangedSubview(self.orLabel)
    self.buttonsStackView.addArrangedSubview(self.loginButton)

    NSLayoutConstraint.activate([
      self.rootStackView.leadingAnchor.constraint(equalTo: self.contentView.layoutMarginsGuide.leadingAnchor),
      self.rootStackView.topAnchor.constraint(equalTo: self.contentView.layoutMarginsGuide.topAnchor),
      self.rootStackView.trailingAnchor.constraint(equalTo: self.contentView.layoutMarginsGuide.trailingAnchor),
      self.rootStackView.bottomAnchor.constraint(equalTo: self.contentView.layoutMarginsGuide.bottomAnchor),

      self.containerView.leadingAnchor.constraint(equalTo: self.rootStackView.leadingAnchor),
      self.containerView.topAnchor.constraint(equalTo: self.rootStackView.topAnchor),
      self.containerView.trailingAnchor.constraint(equalTo: self.rootStackView.trailingAnchor),
      self.containerView.bottomAnchor.constraint(equalTo: self.rootStackView.bottomAnchor),
      ])
  }

  required init?(coder aDecoder: NSCoder) {
    fatalError(&quot;init(coder:) has not been implemented&quot;)
  }
}
</code></pre>
<p>ç„¶åæˆ‘ä»¬æœ‰ä¸€ä¸ªè‡ªå®šä¹‰çš„<strong>UITableViewCell</strong>ï¼Œå®ƒä»¥éå¸¸ç±»ä¼¼çš„æ–¹å¼é…ç½®ã€‚</p>
<pre><code class="language-swift">final class EpisodeCell: UITableViewCell {
  private let blurbLabel = UILabel()
  private let contentStackView = UIStackView()
  private let posterImageView = UIImageView()
  private let rootStackView = UIStackView()
  private let sequenceAndDateLabel = UILabel()
  private let titleLabel = UILabel()
  private let watchNowButton = UIButton()

  override init(style: UITableViewCellStyle, reuseIdentifier: String?) {
    super.init(style: style, reuseIdentifier: reuseIdentifier)

    self.blurbLabel.numberOfLines = 0
    self.blurbLabel.font = UIFont.preferredFont(forTextStyle: .subheadline)

    self.contentStackView.axis = .vertical
    self.contentStackView.layoutMargins = .init(top: 24, left: 24, bottom: 32, right: 24)
    self.contentStackView.isLayoutMarginsRelativeArrangement = true
    self.contentStackView.spacing = 12
    self.contentStackView.alignment = .leading
    self.contentStackView.addArrangedSubview(self.sequenceAndDateLabel)
    self.contentStackView.addArrangedSubview(self.titleLabel)
    self.contentStackView.addArrangedSubview(self.blurbLabel)
    self.contentStackView.addArrangedSubview(self.watchNowButton)

    self.rootStackView.translatesAutoresizingMaskIntoConstraints = false
    self.rootStackView.axis = .vertical
    self.rootStackView.addArrangedSubview(self.posterImageView)
    self.rootStackView.addArrangedSubview(self.contentStackView)

    self.sequenceAndDateLabel.font = UIFont.preferredFont(forTextStyle: .caption1).smallCaps

    self.titleLabel.font = UIFont.preferredFont(forTextStyle: .title2)

    self.watchNowButton.setTitle(&quot;Watch episode â†’&quot;, for: .normal)
    self.watchNowButton.setTitleColor(.pf_purple, for: .normal)
    self.watchNowButton.titleLabel?.font = UIFont.preferredFont(forTextStyle: .callout).bolded

    self.contentView.addSubview(self.rootStackView)

    NSLayoutConstraint.activate([
      self.rootStackView.leadingAnchor.constraint(equalTo: self.contentView.leadingAnchor),
      self.rootStackView.trailingAnchor.constraint(equalTo: self.contentView.trailingAnchor),
      self.rootStackView.topAnchor.constraint(equalTo: self.contentView.topAnchor),
      self.rootStackView.bottomAnchor.constraint(equalTo: self.contentView.bottomAnchor),

      self.posterImageView.widthAnchor.constraint(equalTo: self.posterImageView.heightAnchor, multiplier: 16/9),
      ])
  }

  required init?(coder aDecoder: NSCoder) {
    fatalError(&quot;init(coder:) has not been implemented&quot;)
  }
</code></pre>
<p>åœ¨å•å…ƒæ ¼çš„æœ«å°¾ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª<strong>configure</strong>å‡½æ•°ï¼Œç»™å®šä¸€ä¸ª<strong>Episode</strong>æ¨¡å‹ï¼Œå®ƒé…ç½®ä¸€ä¸ªå•å…ƒæ ¼ã€‚</p>
<pre><code class="language-swift">func configure(with episode: Episode) {
    self.titleLabel.text = episode.title
    self.blurbLabel.text = episode.blurb
    let formattedDate = episodeDateFormatter.string(from: episode.publishedAt)
    self.sequenceAndDateLabel.text = &quot;#\(episode.sequence) â€¢ \(formattedDate)&quot;

    URLSession.shared.dataTask(with: URL(string: episode.posterImageUrl)!) { data, _, _ in
      DispatchQueue.main.async { self.posterImageView.image = data.flatMap(UIImage.init(data:)) }
      }.resume()
  }
}
</code></pre>
<p><strong>Episode</strong>æ¨¡å‹æ˜¯ä¸€ä¸ªç®€å•çš„ç»“æ„ä½“ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå€¼æ•°ç»„æ¥æ˜¾ç¤ºæˆ‘ä»¬çš„è¡¨è§†å›¾ã€‚</p>
<pre><code class="language-swift">public struct Episode {
  public let blurb: String
  public let posterImageUrl: String
  public let publishedAt: Date
  public let sequence: Int
  public let title: String
}

public let episodes: [Episode] = [
  // â€¦
]
</code></pre>
<p><strong>cell</strong>çš„<strong>configure</strong>æ–¹æ³•å°†æ­¤æ•°æ®åˆ†é…ç»™ä¸€äº›æ ‡ç­¾ï¼Œå¹¶ä»<strong>URL</strong>å¿«é€Ÿè·å–æµ·æŠ¥å›¾åƒã€‚åƒè¿™æ ·å†…è”åŠ è½½å›¾åƒå¯èƒ½ä¸æ˜¯ç¼–å†™è¿™ç±»ä»£ç çš„æœ€ä½³æ–¹å¼ï¼Œä½†å®ƒç»å¯¹æ˜¯æœ€ç®€å•çš„ï¼Œå¹¶å¸®åŠ©æˆ‘ä»¬å¿«é€Ÿå¯åŠ¨å’Œè¿è¡Œã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬æ¥åˆ°äº†<strong>EpisodeListViewController</strong>ï¼Œå®ƒæ˜¯é©±åŠ¨æˆ‘ä»¬å±å¹•çš„æ•´ä¸ªè§†å›¾æ§åˆ¶å™¨ã€‚å®ƒè®¾ç½®ä¸€äº›åŸºæœ¬å±æ€§ä»¥å…è®¸è‡ªåŠ¨è°ƒæ•´å•å…ƒæ ¼å¤§å°ï¼Œå¹¶å®šä¹‰æ•°æ®æºã€‚</p>
<pre><code class="language-swift">final class EpisodeListViewController: UITableViewController {
  override func viewDidLoad() {
    super.viewDidLoad()
    self.tableView.estimatedRowHeight = 400
    self.tableView.rowHeight = UITableViewAutomaticDimension
  }

  override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
    if indexPath.row == 0 {
      return SubscribeCalloutCell(style: .default, reuseIdentifier: nil)
    }

    let cell = EpisodeCell(style: .default, reuseIdentifier: nil)
    cell.configure(with: episodes[indexPath.row - 1])
    return cell
  }

  override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
    return episodes.count + 1
  }
}
</code></pre>
<p>æœ€åï¼Œæˆ‘ä»¬åšäº†ä¸€äº›å·¥ä½œæ¥è¿æ¥å®æ—¶è§†å›¾ã€‚</p>
<pre><code class="language-swift">let vc = EpisodeListViewController()
vc.preferredContentSize = .init(width: 376, height: 1000)
PlaygroundPage.current.liveView = vc
</code></pre>
<p>æˆ‘ä»¬å–œæ¬¢çš„æ˜¯å®ƒæ²¡æœ‰ä»»ä½•æŠ½è±¡çš„å±‚æ¬¡ã€‚ å®ƒéå¸¸ç®€å•ï¼Œå¦‚æœä½ åªéµå¾ªè‹¹æœçš„æ–‡æ¡£å’Œç¤ºä¾‹ä»£ç ï¼Œä½ å¯èƒ½ä¼šè‡ªç„¶è€Œç„¶åœ°å¾—åˆ°å®ƒã€‚å¤§å¤šæ•°äººéƒ½å¯ä»¥ä½¿ç”¨è¿™ç§é£æ ¼çš„ä»£ç åº“å¹¶éµå¾ªå®ƒï¼Œè€Œæ— éœ€è´¹åŠ›åœ°é˜…è¯»ä»»ä½•é¢å¤–çš„ä»£ç ã€‚</p>
<p>ç„¶è€Œï¼Œè¿™å¹¶ä¸æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½æ”¹è¿›è¿™äº›è§†å›¾å’Œè§†å›¾æ§åˆ¶å™¨ï¼Œä½¿å…¶æ›´å…·å¯é‡ç”¨æ€§ï¼Œç‰¹åˆ«æ˜¯æ ·å¼ã€‚ ç°åœ¨ï¼Œæˆ‘ä»¬æœ‰å¾ˆå¤šå…³äºå†…è”çš„å€¼å’Œé…ç½®ï¼Œè®©æˆ‘ä»¬é€šè¿‡åˆ›å»ºä¸€ä¸ªæ›´å¯ç»„åˆå’Œå¯é‡ç”¨çš„ç³»ç»Ÿæ¥å¤„ç†å’Œæå–ä¸€äº›ä¸œè¥¿ã€‚</p>
<h2 id="3-a-namemagicnumbersamagic-numbers">3. <a name='Magicnumbers'></a>Magic numbers</h2>
<p>è®©æˆ‘ä»¬ä»ä¸€å †æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ç¥å¥‡æ•°å­—å¼€å§‹ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬é…ç½®ä¸€ä¸ªç‰¹å®šå †æ ˆè§†å›¾çš„è¾¹è·å’Œé—´è·æ—¶ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸²24sï¼Œä¸€ä¸ª32ï¼Œå’Œä¸€ä¸ª12åˆ†é…åˆ°å„å¤„ã€‚</p>
<pre><code class="language-swift">self.contentStackView.layoutMargins = .init(
  top: 24,
  left: 24,
  bottom: 32,
  right: 24
)
// â€¦
self.contentStackView.spacing = 12
</code></pre>
<p>æˆ‘ä»¬çš„è®¾è®¡å¸ˆä½¿ç”¨ç½‘æ ¼ç³»ç»Ÿè®¾è®¡äº†è¿™ä¸ªè§†å›¾ã€‚ä»–ä»¬ä½¿ç”¨çš„ä¸æ˜¯åŸå§‹çš„å®šç‚¹å€¼ï¼Œè€Œæ˜¯ä¸€ä¸ªå®šç‚¹å€¼çš„å€æ•°ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œçœ‹èµ·æ¥æˆ‘ä»¬æ‰€æœ‰çš„å¸ƒå±€æ•°å­—éƒ½èƒ½è¢«4æ•´é™¤ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„è®¾è®¡å¸ˆä½¿ç”¨äº†ä¸€ä¸ª4ç‚¹ç½‘æ ¼ã€‚</p>
<p>è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¸®åŠ©å‡½æ•°æ¥æ›¿æ¢è¿™äº›ç¥å¥‡çš„æ•°å­—ï¼Œè¿™è®©æˆ‘ä»¬æ›´è¯šå®ä¸€ç‚¹ã€‚è¿™å°†ç®€åŒ–äº‹æƒ…ï¼Œè®©æˆ‘ä»¬ä»ç½‘æ ¼å•ä½è€Œä¸æ˜¯ç»å¯¹ç‚¹çš„è§’åº¦æ¥è®¨è®ºå¸ƒå±€ã€‚</p>
<p>è®©æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªé™æ€å‡½æ•°æ¥æ‰©å±•CGFloatï¼Œç»™å®šä¸€ä¸ªç½‘æ ¼å•å…ƒï¼Œè¯¥å‡½æ•°è¿”å›ç›¸åº”çš„CGFloatå€¼ã€‚</p>
<pre><code class="language-swift">extension CGFloat {
  public static func pf_grid(_ n: Int) -&gt; CGFloat {
    return CGFloat(n) * 4.0
  }
}
</code></pre>
<p>æˆ‘ä»¬å†³å®šä½¿ç”¨pf_å‘½åç©ºé—´ä½œä¸ºå‰ç¼€ï¼Œä»¥é¿å…ä»»ä½•å†²çªï¼Œå°½ç®¡åœ¨å®è·µä¸­å¯èƒ½ä¸æ˜¯å¿…éœ€çš„ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨ç½‘æ ¼å•ä½æ¥æ›¿æ¢æ‰€æœ‰è¿™äº›ç»å¯¹å€¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¹‹å‰çš„å †æ ˆè§†å›¾å¸ƒå±€è¾¹è·å’Œé—´è·æ˜¯è¿™æ ·çš„:</p>
<pre><code class="language-swift">self.contentStackView.layoutMargins = .init(
  top: 24,
  left: 24,
  bottom: 32,
  right: 24
)
// â€¦
self.contentStackView.spacing = 12
</code></pre>
<p>To this:</p>
<pre><code class="language-swift">self.contentStackView.layoutMargins = .init(
  top: .pf_grid(6),
  left: .pf_grid(6),
  bottom: .pf_grid(8),
  right: .pf_grid(6)
)
// â€¦
self.contentStackView.spacing = .pf_grid(3)
</code></pre>
<p>é€šè¿‡æ›¿æ¢è¿™äº›ç»å¯¹ç‚¹ï¼Œæˆ‘ä»¬å°†ç½‘æ ¼ç³»ç»Ÿåº”ç”¨åˆ°æ•´ä¸ªè§†å›¾æ§åˆ¶å™¨ä¸­ï¼Œè¿™æœ‰åŠ©äºç¡®ä¿å…ƒç´ æ•´é½ä¸€è‡´åœ°æ’åˆ—ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå°çš„æ”¹å˜ï¼Œä½†ä¼šéšç€æ—¶é—´çš„æ¨ç§»è€Œå¾—åˆ°å›æŠ¥ã€‚</p>
<h2 id="4-a-namereusablemarginsareusable-margins">4. <a name='Reusablemargins'></a>Reusable margins</h2>
<p>ç°åœ¨è®©æˆ‘ä»¬æ¥è§£å†³æˆ‘ä»¬åœ¨å„ç§è§†å›¾ä¸­çœ‹åˆ°çš„ä¸€äº›é‡å¤ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä½¿ç”¨.**pf_grid(6)**åœ¨è¿™ä¸ªå±å¹•ä¸Šæ’å…¥äº†å¾ˆå¤šå †æ ˆè§†å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¹Ÿå¸Œæœ›åœ¨å…¶ä»–å±å¹•ä¸Šè¿™æ ·åšï¼Œä»¥æ ‡å‡†åŒ–åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­æ ¹å…ƒç´ çš„å¡«å……é‡ã€‚æˆ‘ä»¬æƒ³åšçš„æ˜¯æŠŠå®ƒæå–åˆ°ä¸€ä¸ªæ ·å¼å‡½æ•°ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨ä¸€ç›´æƒ³å®ƒäº†ã€‚</p>
<p>æˆ‘ä»¬çš„playgroundåµŒå…¥ <strong><a href="https://github.com/pointfreeco/swift-overture">Overture</a></strong> GitHub åº“ã€‚æˆ‘ä»¬å°†ç”¨å®ƒæ¥å¸®åŠ©æ„å»ºè¿™äº›æ ·å¼å‡½æ•°ã€‚</p>
<pre><code class="language-swift">import Overture
</code></pre>
<p>å¯¼å…¥<strong>Overture</strong>åï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ç¼–å†™æ ·å¼æŒ‡å—ï¼Œä»æè¿°å°†è¿™äº›è¾¹è·åº”ç”¨åˆ°å †æ ˆè§†å›¾å’Œå…¶ä»–å…ƒç´ çš„å‡½æ•°å¼€å§‹ã€‚</p>
<pre><code class="language-swift">let generousMargins = mut(
  \UIView.layoutMargins,
  .init(
    top: .pf_grid(6),
    left: .pf_grid(6),
    bottom: .pf_grid(6),
    right: .pf_grid(6)
  )
)
</code></pre>
<p>æˆ‘ä»¬ä½¿ç”¨äº†<strong>mut</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªåŠ©æ‰‹ï¼Œç»™å®šé”®è·¯å¾„å’Œå€¼ï¼Œå®ƒä¼šç”Ÿæˆä¸€ä¸ªsetterå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å’Œé‡ç”¨è¯¥å‡½æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å·²ç»äº§ç”Ÿäº†ä¸€ä¸ªæ…·æ…¨çš„<strong>margin</strong>å‡½æ•°ï¼Œç»™å®šä¸€ä¸ª<strong>UIView</strong>ï¼Œå°†å…¶<strong>layoutmargin</strong>çªå˜ä¸º6ä¸ªç½‘æ ¼å•å…ƒã€‚</p>
<p>è¿™æ˜¯æè¿°å’Œæ„å»ºè¿™äº›å¯é‡ç”¨åŠŸèƒ½çš„ä¸€ç§éå¸¸è½»é‡çº§çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³åº”ç”¨å®ƒä»¬ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„é…ç½®:</p>
<pre><code class="language-swift">self.cardView.layoutMargins = .init(
  top: .pf_grid(6),
  left: .pf_grid(6),
  bottom: .pf_grid(6),
  right: .pf_grid(6)
)
</code></pre>
<p>Becomes this:</p>
<pre><code class="language-swift">with(self.cardView, generousMargins)
</code></pre>
<p><strong>with</strong>å‡½æ•°ä¹Ÿæ¥è‡ª<strong>Overture</strong>ï¼Œè¿™æ˜¯ä¸€ä¸ªä»å·¦åˆ°å³çš„å‡½æ•°åº”ç”¨ç¨‹åºçš„éæ“ä½œç¬¦ç‰ˆæœ¬ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå‡½æ•°åº”ç”¨åˆ°å…¶ä»–å‡ ä¸ªå †æ ˆè§†å›¾ï¼Œä½†å…¶ä¸­ä¸€ä¸ªè§†å›¾çš„åº•è·ç¨å¾®å¤§ä¸€äº›ã€‚</p>
<pre><code class="language-swift">self.contentStackView.layoutMargins = .init(
  top: .pf_grid(6),
  left: .pf_grid(6),
  bottom: .pf_grid(8),
  right: .pf_grid(6)
)
</code></pre>
<p>å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨<strong>Overture</strong>ä¸­è¿˜æœ‰å¦ä¸€ç§ç»„åˆæ–¹å¼:<strong>concat</strong>ï¼Œå®ƒå…è®¸æˆ‘ä»¬åœ¨ä½¿ç”¨é¢å¤–çš„åº•éƒ¨è¾¹è·ä¹‹å‰å…ˆä½¿ç”¨æˆ‘ä»¬çš„<strong>generousMargins</strong>ã€‚</p>
<pre><code class="language-swift">with(self.contentStackView, concat(
  generousMargins,
  mut(\.layoutMargins.bottom, .pf_grid(8)
))
</code></pre>
<p>å¾ˆé…·çš„æ˜¯ï¼Œå³ä½¿æˆ‘ä»¬æœ‰ä¸€ä¸ªç¨å¾®ä¸åŒçš„é£æ ¼ï¼Œæˆ‘ä»¬ä»ç„¶èƒ½å¤Ÿåˆ©ç”¨åŸºæœ¬çš„<strong>generousMargins</strong>é£æ ¼ï¼Œå¹¶ä»é‚£é‡Œè¿›ä¸€æ­¥è°ƒæ•´å®ƒã€‚è¿™å°±æ˜¯å‡½æ•°å¤åˆçš„ä¼˜ç‚¹ã€‚</p>
<h2 id="5-a-namereusablestackviewstylesareusable-stack-view-styles">5. <a name='Reusablestackviewstyles'></a>Reusable stack view styles</h2>
<p>æˆ‘ä»¬çš„å †æ ˆè§†å›¾è¿˜å…±äº«å…¶ä»–ä¸€äº›å±æ€§ã€‚ å®ƒä»¬é…ç½®äº†ä¸€ä¸ªå‚ç›´è½´ï¼Œä¸€è‡´çš„é—´è·ï¼Œå¹¶è®¾ <strong>isLayoutMarginsRelativeArrangement</strong>ä¸º<strong>true</strong>ã€‚æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿå°†è¿™äº›ç»†èŠ‚æå–åˆ°ä¸€ä¸ªå…±äº«çš„æ ·å¼å‡½æ•°ä¸­ã€‚</p>
<p>å‡½æ•°çš„å¥½å¤„åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç°æœ‰ä»£ç çš„æ—è¾¹å†…è”åœ°å®šä¹‰å®ƒä»¬ã€‚ä»é…ç½®ç¬¬ä¸€ä¸ªå•å…ƒæ ¼çš„æ ¹å †æ ˆè§†å›¾çš„ä½ç½®å¼€å§‹ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåŸºæœ¬å †æ ˆè§†å›¾æ ·å¼ã€‚</p>
<pre><code class="language-swift">let baseStackViewStyle = concat(
  mut(\.spacing, .pf_grid),
  mut(\.axis, .vertical),
  mut(\.isLayoutMarginsRelativeArrangement, true),
  mut(\.translatesAutoresizingMaskIntoConstraints, false)
)
</code></pre>
<p>æˆ‘ä»¬è¿˜æå–äº†<strong>translatesAutoresizingMaskIntoConstraints</strong>ï¼Œå› ä¸ºæˆ‘ä»¬çš„æ ¹å †æ ˆè§†å›¾é€šå¸¸è¢«é™åˆ¶åˆ°ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€çš„çˆ¶è§†å›¾ã€‚</p>
<p>æˆ‘ä»¬èƒ½å¤Ÿå‰ªåˆ‡å’Œç²˜è´´æˆ‘ä»¬çš„åŸå§‹é…ç½®ï¼Œä»å¯å˜èµ‹å€¼åˆ°<strong>mutt</strong>åšä¸€äº›è½»é‡çº§çš„ä¿®é¥°æ€§æ›´æ”¹ï¼Œæˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†ä¸€ä¸ªå¯é‡ç”¨çš„ä»£ç å•å…ƒ!</p>
<p>æ›´é‡è¦çš„æ˜¯ï¼Œè¿™äº›åŸºæœ¬å †æ ˆè§†å›¾å¯èƒ½åº”è¯¥é…ç½®ä¸ºåº”ç”¨æˆ‘ä»¬çš„<strong>generous</strong>è¾¹è·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æ·»åŠ ä¸€è¡Œæ¥å®ç°ã€‚</p>
<pre><code class="language-swift">let baseStackViewStyle = concat(
  generousMargins,
  mut(\.spacing, .pf_grid),
  mut(\.axis, .vertical),
  mut(\.isLayoutMarginsRelativeArrangement, true),
  mut(\.translatesAutoresizingMaskIntoConstraints, false)
)
// â€¦
with(self.rootStackView, baseStackViewStyle)
</code></pre>
<p>æˆ‘ä»¬å·²ç»å†…è”å®šä¹‰äº†è¿™ä¸ªæ ·å¼å‡½æ•°ï¼Œä½†æ˜¯æ ·å¼å‡½æ•°å¯ä»¥å­˜åœ¨äºä»»ä½•åœ°æ–¹! å®ƒæ˜¯ä¸€ä¸ªè¿œç¦»æ–‡ä»¶ä½œç”¨åŸŸçš„å‰ªåˆ‡ç²˜è´´ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä»–å•å…ƒæ ¼ä¸­é‡ç”¨å®ƒã€‚è¿™è¯´æ˜äº†Swiftä¸­çš„å‡½æ•°æ˜¯å¤šä¹ˆçš„è½»é‡çº§!</p>
<p>æˆ‘ä»¬ç°åœ¨å¯ä»¥äº¤æ¢å‡ºæˆ‘ä»¬å…¶ä»–å †æ ˆè§†å›¾ä¸­çš„<strong>generousMargins</strong>æ¥ä½¿ç”¨<strong>baseStackViewStyle</strong>ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ é™¤è®¸å¤šä»¥å‰å†—ä½™çš„ä»£ç ã€‚</p>
<p>è¿™ä¸ªå±å¹•ä¸Šè¿˜æœ‰å¦ä¸€ä¸ªå †æ ˆè§†å›¾ï¼Œå®ƒé…ç½®äº†å‚ç›´è½´å’Œè‡ªåŠ¨å¸ƒå±€ï¼Œä½†æ²¡æœ‰ä»»ä½•è¾¹è·ã€‚ ä¹Ÿå¯ä»¥ä½¿ç”¨æ ·å¼å‡½æ•°æ¥åˆ†è§£è¿™ä¸ªé…ç½®ã€‚</p>
<p>è®©æˆ‘ä»¬ä»<strong>translatesAutoresizingMaskIntoConstraints</strong>å¼€å§‹ï¼Œè¿™æœ‰ç‚¹æ‹—å£ã€‚è€Œä¸æ˜¯ä½¿ç”¨<strong>mut</strong>æ¥è®¾ç½®æˆ‘ä»¬çš„<strong>baseStackViewStyle</strong>ï¼Œä½†å¯ä»¥æå–å®ƒè‡ªå·±çš„ï¼Œæ›´å…·æè¿°æ€§çš„åŠ©æ‰‹ã€‚</p>
<pre><code class="language-swift">let autoLayoutStyle = mut(\UIView.translatesAutoresizingMaskIntoConstraints, false)

let baseStackViewStyle = concat(
  generousMargins,
  mut(\.spacing, .pf_grid),
  mut(\.axis, .vertical),
  mut(\.isLayoutMarginsRelativeArrangement, true),
  autoLayoutStyle
)
</code></pre>
<p>æˆ‘ä»¬é€šå¸¸è¿˜å°†å †æ ˆè§†å›¾è½´è®¾ç½®ä¸ºå‚ç›´çš„ï¼Œæˆ‘ä»¬ä¹ŸæŠŠå®ƒæå–å‡ºæ¥ã€‚</p>
<pre><code class="language-swift">let verticalStackView = mut(\UIStackView.axis, .vertical)

let baseStackViewStyle = concat(
  generousMargins,
  mut(\.spacing, .pf_grid),
  verticalStackView,
  mut(\.isLayoutMarginsRelativeArrangement, true),
  autoLayoutStyle
)
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ ¹å †æ ˆè§†å›¾å¹¶ä½¿ç”¨è¿™äº›å¯é‡ç”¨çš„åŠ©æ‰‹å¯¹å…¶è¿›è¡Œé…ç½®ã€‚</p>
<pre><code class="language-swift">with(self.rootStackView, concat(
  autoLayoutStyle,
  verticalStackView
))
</code></pre>
<p><strong>Overture</strong>è®©è¿™ä¸€åˆ‡å˜å¾—ç®€å•! æˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°ï¼Œåœ¨ä¸€è¡Œä¸­ï¼ŒæŒ‘é€‰å‡ºç‰¹å®šç±»å‹çš„æ ·å¼ï¼Œé‡å‘½åä»–ä»¬æ›´ä»¤äººéš¾å¿˜ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­é‡ç”¨ä»–ä»¬!</p>
<h2 id="6-a-namereusablebuttonstylesareusable-button-styles">6. <a name='Reusablebuttonstyles'></a>Reusable button styles</h2>
<p>è®©æˆ‘ä»¬æ¥è§£å†³æ›´å¤šçš„é‡å¤é—®é¢˜:å¦‚ä½•è®¾ç½®æŒ‰é’®çš„æ ·å¼ã€‚</p>
<p>æˆ‘ä»¬åœ¨å±å¹•ä¸Šè®¾ç½®äº†ä¸€äº›æŒ‰é”®:ä¼ è¾¾ä¸»è¦æ“ä½œçš„å¡«å……æŒ‰é’®;ä¸€ä¸ªæ¬¡è¦çš„ã€ä»…é™æ–‡æœ¬çš„æŒ‰é’®;ç¬¬ä¸‰ä¸ªçº¯æ–‡æœ¬æŒ‰é’®ï¼ŒåŸè‰²ã€‚å®ƒä»¬éƒ½æœ‰ç›¸åŒçš„å­—ä½“å’Œé‡é‡ï¼Œè€Œå…¶ä»–çš„ä¸€åˆ‡éƒ½æœ‰ä¸€äº›ä¸åŒã€‚æˆ‘ä»¬åº”è¯¥èƒ½å¤Ÿç»„åˆä¸€ç»„æ ·å¼å‡½æ•°æ¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œå¹¶ä½¿å…¶æ›´å…·å¯é‡ç”¨æ€§ã€‚</p>
<p>è®©æˆ‘ä»¬ä»è®¾ç½®å­—ä½“çš„åŸºæœ¬æ ·å¼å‡½æ•°å¼€å§‹ã€‚</p>
<pre><code class="language-swift">let baseTextButtonStyle = mut(\UIButton.titleLabel.font, UIFont.preferredFont(forTextStyle: .subheadline))
</code></pre>
<p>This unfortunately doesnâ€™t compile.</p>
<blockquote>
<p>ğŸ›‘ Expression type â€˜ReferenceWritableKeyPath&lt;UIButton, UIFont!&gt;â€™ is ambiguous without more context.</p>
</blockquote>
<p>é—®é¢˜æ˜¯<strong>titleLabel</strong>æ˜¯ä¸€ä¸ªå¯é€‰çš„å±æ€§ï¼Œå¯¹äºæŸäº›<strong>UIButtonType</strong>å€¼ï¼Œå¦‚.** contactaddå’Œ. detaildisclosure**ã€‚æˆ‘ä»¬å¤„ç†çš„æ˜¯åŸºæœ¬æ–‡æœ¬æŒ‰é’®ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼ºåˆ¶å±•å¼€è¿™ä¸ªé”®è·¯å¾„æ¥è¿›è¡Œç¼–è¯‘ã€‚</p>
<pre><code class="language-swift">let baseTextButtonStyle = mut(\UIButton.titleLabel!.font, UIFont.preferredFont(forTextStyle: .subheadline))
</code></pre>
<p>æˆ‘ä»¬å·²ç»æ·»åŠ äº†ä¸€ä¸ªç”¨äºç²—ä½“å­—ä½“çš„åŠ©æ‰‹ï¼Œå¹¶å¯ä»¥å°†å…¶æ·»åŠ åˆ°çªå˜çš„æœ«å°¾ã€‚</p>
<pre><code class="language-swift">let baseTextButtonStyle = mut(\UIButton.titleLabel!.font, UIFont.preferredFont(forTextStyle: .subheadline).bolded)
</code></pre>
<p>ä¸è¿‡ï¼Œæ›´å¥½çš„åšæ³•å¯èƒ½æ˜¯å°†è¿™ç§è½¬æ¢åˆ†è§£åˆ°å®ƒè‡ªå·±çš„æ ·å¼å‡½æ•°ä¸­ï¼Œä½¿å…¶æ›´æ˜“äºé‡ç”¨ã€‚</p>
<pre><code class="language-swift">let bolded: (inout Font) -&gt; Void = { $0 = $0.bolded }
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨æ›´å°çš„ç»„åˆå•å…ƒæ¥æ„å»º<strong>baseTextButtonStyle</strong>ã€‚ æˆ‘ä»¬å°†ä½¿ç”¨<strong>mver</strong>è€Œä¸æ˜¯<strong>mut</strong>ï¼Œå› ä¸º<strong>bolded</strong>æè¿°çš„æ˜¯å¯¹å­—ä½“çš„è½¬æ¢ï¼Œè€Œä¸æ˜¯ç”¨æ¥æ›¿æ¢å®ƒçš„å€¼ã€‚</p>
<pre><code class="language-swift">let baseTextButtonStyle = concat(
  mut(\UIButton.titleLabel!.font, .preferredFont(forTextStyle: .subheadline),
  mver(\UIButton.titleLabel!.font!, bolded)
)
</code></pre>
<p>å‡ºäºæŸäº›åŸå› ï¼ŒUILabelä¸Šçš„å­—ä½“æ˜¯ä¸€ä¸ªéšå¼æ‰“å¼€çš„å¯é€‰å­—ä½“ï¼Œ<strong>UIFont!</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜å¿…é¡»å¼ºè¡Œæ‰“å¼€å®ƒã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬å¯¹äºŒçº§æ–‡æœ¬æŒ‰é’®çš„æ ·å¼è¿›è¡Œåˆ†å±‚ã€‚ æˆ‘ä»¬æƒ³ä»<strong>baseTextButtonStyle</strong>å¼€å§‹ï¼Œç„¶åæ›´æ–°æ ‡é¢˜é¢œè‰²ã€‚æ‰§è¡Œæ­¤æ“ä½œçš„<strong>API</strong>ä¸æ˜¯ä¸€ä¸ªå±æ€§ï¼Œä¸æˆ‘ä»¬çš„è®¸å¤šå…¶ä»–æ ·å¼å‡½æ•°ä¸åŒï¼Œå› æ­¤<strong>mut</strong>å’Œkeyè·¯å¾„åœ¨è¿™é‡Œä¸é€‚ç”¨ã€‚ å¹¸è¿çš„æ˜¯ï¼Œè¿™äº›å‡½æ•°ç»„åˆå¾—å¾ˆå¥½ï¼Œä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯æ‰“å¼€ä¸€ä¸ªé—­åŒ…å¹¶å†…è”é…ç½®æ ‡é¢˜é¢œè‰²ã€‚</p>
<pre><code class="language-swift">let secondaryTextButtonStyle = concat(
  baseTextButtonStyle,
  { $0.setTitleColor(.black, for: .normal) }
)
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬æœ‰äº†ä¸»æ–‡æœ¬æŒ‰é’®ï¼Œå®ƒçš„é…ç½®æ–¹å¼åŸºæœ¬ç›¸åŒï¼Œä½†æˆ‘ä»¬å°†åœ¨<strong>UIColor</strong>ä¸Šä½¿ç”¨ä¸€ä¸ªé™æ€åŠ©æ‰‹æè¿°ç´«è‰²ã€‚</p>
<pre><code class="language-swift">let primaryTextButtonStyle = concat(
  baseTextButtonStyle,
  { $0.setTitleColor(.pf_purple, for: .normal) }
)
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åº”ç”¨è¿™äº›æ ·å¼å¹¶åˆ é™¤ä¸€äº›é‡å¤çš„ä»£ç ã€‚æˆ‘ä»¬çš„ç™»å½•æŒ‰é’®é…ç½®æ”¹å˜å¦‚ä¸‹:</p>
<pre><code class="language-swift">self.loginButton.setTitleColor(.black, for: .normal)
self.loginButton.titleLabel?.font = UIFont.preferredFont(forTextStyle: .subheadline).bolded
</code></pre>
<p>To this:</p>
<pre><code class="language-swift">with(self.loginButton, secondaryTextButtonStyle)
</code></pre>
<p>And our â€œwatch episodeâ€ button changes from this:</p>
<pre><code class="language-swift">self.watchNowButton.setTitleColor(.pf_purple, for: .normal)
self.watchNowButton.titleLabel?.font = UIFont.preferredFont(forTextStyle: .callout).bolded
</code></pre>
<p>To this:</p>
<pre><code class="language-swift">with(self.watchNowButton, primaryTextButtonStyle)
</code></pre>
<p>æˆ‘ä»¬å·²ç»å¤„ç†äº†æ–‡æœ¬æŒ‰é’®ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬å¡«å……æŒ‰é’®ã€‚æˆ‘ä»¬æ³¨æ„åˆ°çš„ä¸€äº›å˜åŒ–æ˜¯å®ƒçš„èƒŒæ™¯æ˜¯å¡«å……çš„ï¼Œå®ƒæœ‰ä¸€äº›å†…å®¹æ’å…¥ç»™æ–‡æœ¬ä¸€ç‚¹å¡«å……ã€‚</p>
<p>è®©æˆ‘ä»¬ä»å®šä¹‰åŸºæœ¬æŒ‰é’®æ ·å¼å¼€å§‹ã€‚å®ƒå°†ä»æˆ‘ä»¬çš„åŸºæœ¬æ–‡æœ¬æŒ‰é’®æ ·å¼å¼€å§‹ï¼Œå¹¶æ·»åŠ ä¸€äº›æ’å…¥ã€‚</p>
<pre><code class="language-swift">let baseButtonStyle = concat(
  baseTextButtonStyle,
  mut(\.contentEdgeInsets, .init(
    top: .pf_grid(2),
    left: .pf_grid(4),
    bottom: .pf_grid(2),
    right: .pf_grid(4)
  )
))
</code></pre>
<p>æŒ‰é’®ä¹Ÿæœ‰åœ†è§’ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ªåœ†è§’é€ å‹åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé€‚ç”¨äºä»»ä½•è§†å›¾çš„å‡½æ•°ã€‚</p>
<pre><code class="language-swift">func roundedStyle(cornerRadius: CGFloat) -&gt; (UIView) -&gt; Void {
  return concat(
    mut(\.layer.cornerRadius, cornerRadius),
    mut(\.layer.masksToBounds, true)
  )
}
</code></pre>
<p>å®ƒéœ€è¦<strong>configuration</strong>ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠå®ƒåŒ…è£¹åœ¨æœ‰ä¸€ä¸ªè§’åŠå¾„çš„å‡½æ•°ã€‚</p>
<p>è¿™å¾ˆé…·!æˆ‘ä»¬ä¸éœ€è¦æ‰“å¼€ä¸€ä¸ªå°é—­çš„è§†å›¾ã€‚æˆ‘ä»¬èƒ½å¤Ÿæ‹¼å‡‘å‡ºä¸€äº›æˆ‘ä»¬éå¸¸ç†Ÿæ‚‰çš„å°å•å…ƒã€‚</p>
<p>ä»è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåŸºæœ¬çš„åœ†è§’æ ·å¼ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„åŠå¾„ï¼Œæˆ‘ä»¬å°†åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­ä½¿ç”¨ã€‚</p>
<pre><code class="language-swift">let baseRoundedStyle = roundedStyle(cornerRadius: 6)
</code></pre>
<p>é€šè¿‡è¿™äº›éƒ¨ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºä¸€ä¸ªåŸºç¡€å¡«å……æŒ‰é’®æ ·å¼ã€‚</p>
<pre><code class="language-swift">let baseFilledButtonStyle = concat(
  baseButtonStyle,
  baseRoundedStyle
)
</code></pre>
<p>ç”±æ­¤ï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥æ´¾ç”Ÿå‡ºä¸»æŒ‰é’®æ ·å¼ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†åŸºæœ¬å¡«å……çš„æŒ‰é’®æ ·å¼ä¸ä¸€äº›é¢œè‰²é…ç½®è¿æ¥èµ·æ¥ã€‚</p>
<pre><code class="language-swift">let primaryButtonStyle = concat(
  baseFilledButtonStyle,
  { $0.setBackgroundImage(.from(color: .pf_purple), for: .normal) },
  { $0.setTitleColor(.white, for: .normal) }
)
</code></pre>
<p>ç°åœ¨ï¼Œæˆ‘ä»¬å·²ç»ä¸ºæŒ‰é’®å»ºç«‹äº†ä¸€ä¸ªæ ·å¼å±‚æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­è‡ªç”±é‡ç”¨ï¼Œæˆ‘ä»¬è¿˜ä¸ºå…¶ä»–è§†å›¾æ´¾ç”Ÿäº†å¯é‡ç”¨çš„æ ·å¼å‡½æ•°!</p>
<p>å½“æˆ‘ä»¬å°†å…¶åº”ç”¨åˆ°æŒ‰é’®ä¸Šæ—¶ï¼Œè¿™é¡¹å·¥ä½œå¾—åˆ°äº†å›æŠ¥ã€‚æ‰€æœ‰çš„è¿™ä¸€åˆ‡:</p>
<pre><code class="language-swift">self.subscribeButton.setTitleColor(.white, for: .normal)
self.subscribeButton.titleLabel?.font = UIFont.preferredFont(forTextStyle: .subheadline).bolded
self.subscribeButton.setBackgroundImage(.from(color: .pf_purple), for: .normal)
self.subscribeButton.layer.cornerRadius = 6
self.subscribeButton.layer.masksToBounds = true
self.subscribeButton.contentEdgeInsets = .init(
  top: .pf_grid(2), left: 16, bottom: 8, right: 16
)
</code></pre>
<p>Becomes this:</p>
<pre><code class="language-swift">with(self.subscribeButton, primaryButtonStyle)
</code></pre>
<p>è¿™éœ€è¦æ¸…ç†å¤§é‡ä»£ç ï¼Œæœªæ¥æ¯ä¸ªä½¿ç”¨ä¸»æŒ‰é’®çš„è§†å›¾å’Œå±å¹•éƒ½å¯ä»¥åˆ©ç”¨å®ƒã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»ºä¸€å †<strong>UIButton</strong>å­ç±»ï¼Œé€šè¿‡ç»§æ‰¿é“¾æ¥è¿·æƒ‘ã€‚æˆ‘ä»¬å¯ä»¥æŠŠéå¸¸å°çš„å‡½æ•°ç»„åˆåœ¨ä¸€èµ·ã€‚</p>
<p>æˆ‘ä»¬å¶å°”ä¼šé‡åˆ°ä¸€ä»¶å¥‡æ€ªçš„äº‹æƒ…ï¼Œéå±æ€§å¼‚å¸¸å€¼çš„ä¸´æ—¶é—­åŒ…å’ŒèŠ±æ‹¬å·ï¼Œæ¯”å¦‚<strong>setTitleColor(for:)<strong>å’Œfriendsã€‚æˆ‘ä»¬çš„å¤§å¤šæ•°æ ·å¼åªä½¿ç”¨</strong>mut</strong>å’Œkeyè·¯å¾„ï¼Œæ‰€ä»¥è¿™äº›å¼‚å¸¸ç¡®å®å¾ˆçªå‡ºã€‚</p>
<p>ä¸ºç±»å‹ä¸Šçš„ä»»ä½•å±æ€§è‡ªåŠ¨ç”Ÿæˆå…³é”®è·¯å¾„ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±çš„å±æ€§å¹¶å…è´¹è·å¾—ä¸€äº›å…³é”®è·¯å¾„ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæŒ‰é’®çš„æ ‡é¢˜é¢œè‰²ã€‚</p>
<pre><code class="language-swift">extension UIButton {
  var normalTitleColor: UIColor? {
    get { return self.titleColor(for: .normal) }
    set { self.setTitleColor(newValue, for: .normal) }
  }
}
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„è®¡ç®—å±æ€§ï¼Œå®ƒåªæ˜¯åœ¨åº•å±‚è°ƒç”¨<strong>getterå’Œsetter</strong>æ–¹æ³•ï¼Œå…³é”®å­—æ˜¯<strong>UIControlState.normal</strong>ã€‚</p>
<p>è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ”¹å˜è¿™ä¸€ç‚¹:</p>
<pre><code class="language-swift">let secondaryTextButtonStyle = concat(
  baseTextButtonStyle,
  { $0.setTitleColor(.black, for: .normal) }
)
</code></pre>
<p>To this:</p>
<pre><code class="language-swift">let secondaryTextButtonStyle = concat(
  baseTextButtonStyle,
  mut(\.normalTitleColor, .black)
)
</code></pre>
<p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå°çš„å˜åŒ–ï¼Œä½†å®ƒæ›´çŸ­ï¼Œè€Œä¸”ä¸æˆ‘ä»¬åœ¨æ„å»ºè¿™äº›æ ·å¼å‡½æ•°æ—¶é€šå¸¸ä½¿ç”¨çš„åŸºäºè·¯å¾„çš„å…³é”®æ ·å¼å‡½æ•°æ›´ä¸€è‡´ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¯ä»¥æ·»åŠ ä¸€ä¸ªå¿«é€Ÿå±æ€§æ¥è®¾ç½®æŒ‰é’®çš„èƒŒæ™¯å›¾åƒã€‚</p>
<pre><code class="language-swift">extension UIButton {
  var normalBackgroundImage: UIImage? {
    get { return self.backgroundImage(for: .normal) }
    set { self.setBackgroundImage(newValue, for: .normal) }
  }
}
</code></pre>
<p>Now this:</p>
<pre><code class="language-swift">let primaryButtonStyle: (UIButton) -&gt; Void = concat(
  baseFillButtonStyle,
  { $0.setTitleColor(.white, for: .normal) },
  { $0.setBackgroundImage(.from(color: .pf_purple), for: .normal) }
)
</code></pre>
<p>Becomes this:</p>
<pre><code class="language-swift">let primaryButtonStyle: (UIButton) -&gt; Void = concat(
  baseFillButtonStyle,
  mut(\.normalTitleColor, .white),
  mut(\.normalBackgroundImage, .from(color: .pf_purple))
)
</code></pre>
<p>è¿™è¡¨æ˜æˆ‘ä»¬æ˜¯æŒ‰ç…§è‡ªå·±çš„æ–¹å¼ä½¿ç”¨è¿™äº›apiçš„! æˆ‘ä»¬å¯ä»¥è‡ªç”±åœ°å®šä¹‰è¿™äº›å±æ€§ï¼Œä»¥ä½¿æˆ‘ä»¬ä½¿ç”¨çš„apiæ›´å¥½ä¸€äº›ã€‚</p>
<h2 id="7-a-namewhatsthepointawhats-the-point">7. <a name='Whatsthepoint'></a>Whatâ€™s the point?</h2>
<p>åœ¨æˆ‘ä»¬çš„èŠ‚ç›®ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨æ¯é›†çš„ç»“å°¾é—®:â€œè¿™æœ‰ä»€ä¹ˆæ„ä¹‰?â€ ç„¶è€Œï¼Œè¿™æ•´ä¸ªepisodeéƒ½æ˜¯å¯¹â€œthe pointâ€çš„æ¢ç´¢ã€‚æˆ‘ä»¬é‡‡ç”¨äº†ä¸€ç³»åˆ—åœ¨æœ¬ç³»åˆ—è¯¾ç¨‹ä¸­ç ”ç©¶è¿‡çš„æ¦‚å¿µï¼Œæœ‰æ—¶éå¸¸æŠ½è±¡ï¼Œå¹¶å°†å®ƒä»¬ä½œä¸ºç°å®ä¸–ç•Œé‡æ„ç»ƒä¹ çš„åŸºç¡€ã€‚</p>
<p>è®©æˆ‘ä»¬èŠ±ç‚¹æ—¶é—´æ¥å‘¼å¸ä¸€ä¸‹ï¼Œçœ‹çœ‹æˆ‘ä»¬åœ¨è¿™ä¸€é›†é‡Œå®Œæˆäº†ä»€ä¹ˆã€‚è¿™é‡Œæˆ‘ä»¬æœ‰æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ª<strong>cell</strong>ä¸Šå®šä¹‰çš„æ‰€æœ‰å†…å®¹:</p>
<pre><code class="language-swift">extension CGFloat {
  static func pf_grid(_ n: Int) -&gt; CGFloat {
    return CGFloat(n) * 4
  }
}

let generousMargins = mut(\UIView.layoutMargins, .init(
  top: .pf_grid(6),
  left: .pf_grid(6),
  bottom: .pf_grid(6),
  right: .pf_grid(6)
))

let autoLayoutStyle = mut(\UIView.translatesAutoresizingMaskIntoConstraints, false)

let verticalStackView = mut(\UIStackView.axis, .vertical)

let baseStackViewStyle = concat(
  generousMargins,
  mut(\UIStackView.spacing, .pf_grid(3)),
  verticalStackView,
  mut(\.isLayoutMarginsRelativeArrangement, true),
  autoLayoutStyle
)

let bolded: (inout UIFont) -&gt; Void = { $0 = $0.bolded }

let baseTextButtonStyle = concat(
  mut(\UIButton.titleLabel!.font, UIFont.preferredFont(forTextStyle: .subheadline)),
  mver(\UIButton.titleLabel!.font!, bolded)
)

extension UIButton {
  var normalTitleColor: UIColor? {
    get { return self.titleColor(for: .normal) }
    set { self.setTitleColor(newValue, for: .normal) }
  }
}

let secondaryTextButtonStyle = concat(
  baseTextButtonStyle,
  mut(\.normalTitleColor, .black)
)

let primaryTextButtonStyle = concat(
  baseTextButtonStyle,
  mut(\.normalTitleColor, .pf_purple)
)

let baseButtonStyle = concat(
  baseTextButtonStyle,
  mut(\.contentEdgeInsets, .init(
    top: .pf_grid(2),
    left: .pf_grid(4),
    bottom: .pf_grid(2),
    right: .pf_grid(4)
  ))
)

func roundedStyle(cornerRadius: CGFloat) -&gt; (UIView) -&gt; Void {
  return concat(
    mut(\.layer.cornerRadius, cornerRadius),
    mut(\.layer.masksToBounds, true)
  )
}

let baseRoundedStyle = roundedStyle(cornerRadius: 6)

let baseFilledButtonStyle = concat(
  baseButtonStyle,
  baseRoundedStyle
)

extension UIButton {
  var normalBackgroundImage: UIImage? {
    get { return self.backgroundImage(for: .normal) }
    set { self.setBackgroundImage(newValue, for: .normal) }
  }
}

let primaryButtonStyle = concat(
  baseFilledButtonStyle,
  mut(\.normalBackgroundImage, .from(color: .pf_purple)),
  mut(\.normalTitleColor, .white)
)
</code></pre>
<p>è¿™äº›éƒ½æ˜¯å¯é‡ç”¨çš„ä»£ç ! è¿™æ„å‘³ç€æˆ‘ä»¬åº”è¯¥å°†è¿™äº›ä»£ç æå–åˆ°å®ƒè‡ªå·±çš„æ ·å¼æŒ‡å—æ–‡ä»¶æˆ–æ¡†æ¶ä¸­! å®ƒæ˜¯ç‹¬ç«‹çš„ä»£ç ï¼Œä¸åŒäºä½ æ‰€æœ‰çš„å…¶ä»–åº”ç”¨ç¨‹åºä»£ç ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ç‹¬ç«‹å­˜åœ¨ã€‚å®ƒè®¾ç½®ä½ çš„ç½‘æ ¼ç³»ç»Ÿï¼Œä½ çš„å¸ƒå±€è¾¹è·ï¼Œä½ çš„å­—ä½“å’Œæ’ç‰ˆï¼Œä½ çš„æŒ‰é’®æ ·å¼ã€‚</p>
<p>é€šè¿‡å°†å®ƒä¿å­˜åœ¨è‡ªå·±çš„æ¡†æ¶ä¸­ï¼Œå¯ä»¥é˜²æ­¢å®ƒä¸å…¶ä»–åº”ç”¨ç¨‹åºä»£ç çº ç¼ åœ¨ä¸€èµ·ã€‚å®ƒè¿«ä½¿æ‚¨ä¸“æ³¨äºå°å‹çš„ã€å¯ç»„åˆçš„ç»„ä»¶ï¼Œè¿™å°†å¸¦æ¥è®¸å¤šå¥½å¤„ã€‚</p>
<p>æˆ‘ä»¬ä¹Ÿå–œæ¬¢æ¸¸ä¹åœºï¼Œå°†ä»£ç æå–åˆ°æ¡†æ¶ä¸­å¯ä»¥å°†å…¶å¯¼å…¥åˆ°æ¡†æ¶ä¸­ï¼Œè€Œåº”ç”¨ç¨‹åºä»£ç åˆ™æ²¡æœ‰è¿™ç§èƒ½åŠ›ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ›å»ºç”ŸåŠ¨çš„ã€å‘¼å¸å¼çš„é£æ ¼æŒ‡å—ï¼Œç›´è§‚åœ°è®°å½•åº”ç”¨ç¨‹åºçš„æ‰€æœ‰é£æ ¼ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ—¥å¸¸ä»£ç ä¸­ä½¿ç”¨å®ƒï¼Œè§‰å¾—è¿™æ˜¯è®¾è®¡UIç»„ä»¶çš„å¥½æ–¹æ³•ã€‚å®ƒä¸åƒä¸€äº›æŠ½è±¡çš„ä¸œè¥¿ä¸€æ ·å¯¹æŠ—<strong>UIKit</strong>ï¼Œè€Œä¸”å®ƒæ˜¯å¦‚æ­¤è½»é‡çº§ï¼Œä»¥è‡³äºå³ä½¿æˆ‘ä»¬å†³å®šåœ¨æœªæ¥å°è¯•å…¶ä»–ä¸œè¥¿ï¼Œå®ƒä¹Ÿä¸éœ€è¦ä»»ä½•å·¥ä½œæ¥å±•å¼€å®ƒå¹¶å†æ¬¡å†…è”åº”ç”¨æ ·å¼ã€‚æˆ‘ä»¬æ‰€åšçš„åªæ˜¯å°†å‡½æ•°æ”¾åœ¨æ ·å¼é…ç½®çš„å‰é¢ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ç»„åˆå®ƒä»¬ã€‚</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://kayouyou.github.io/tag/i-r9uoo_2N/" class="tag">
                    PointFree
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://kayouyou.github.io/post/pointfree-episode-16-dependency-injection-made-easy/">
                  <h3 class="post-title">
                    PointFree Episode 16: Dependency Injection Made Easy
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
