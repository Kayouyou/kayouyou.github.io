<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>ä¸ºiOS APP æ„å»ºä¸€ä¸ªé€šç”¨çš„å¯é‡ç”¨çš„UITableViewController | Kayouyou&#39;s Den</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://kayouyou.github.io/favicon.ico?v=1653207772604">
<link rel="stylesheet" href="https://kayouyou.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="



ä¸ºiOS APP æ„å»ºä¸€ä¸ªé€šç”¨çš„å¯é‡ç”¨çš„UITableViewController




Building the Generic TableViewController


2.1. Using the GenericTable..." />
    <meta name="keywords" content="uitableview,data sources,code reuse" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://kayouyou.github.io">
        <img src="https://kayouyou.github.io/images/avatar.png?v=1653207772604" class="site-logo">
        <h1 class="site-title">Kayouyou&#39;s Den</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      The wise build bridges, while the foolish build barriers.
    </div>
    <div class="site-footer">
      è±«ICPå¤‡2021012281å·-1  | <a class="rss" href="https://kayouyou.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">ä¸ºiOS APP æ„å»ºä¸€ä¸ªé€šç”¨çš„å¯é‡ç”¨çš„UITableViewController</h2>
            <div class="post-date">2021-05-06</div>
            
            <div class="post-content" v-pre>
              <!-- vscode-markdown-toc -->
<ul>
<li>
<ol>
<li><a href="#iOSAPPUITableViewController">ä¸ºiOS APP æ„å»ºä¸€ä¸ªé€šç”¨çš„å¯é‡ç”¨çš„UITableViewController</a></li>
</ol>
</li>
<li>
<ol start="2">
<li><a href="#BuildingtheGenericTableViewController">Building the Generic TableViewController</a></li>
</ol>
<ul>
<li>2.1. <a href="#UsingtheGenericTableViewController">Using the GenericTableViewController</a></li>
<li>2.2. <a href="#SettingUpthePersonGenericTableViewController">Setting Up the Person GenericTableViewController</a></li>
<li>2.3. <a href="#SettingUptheFilmGenericTableViewController">Setting Up the Film GenericTableViewController</a></li>
<li>2.4. <a href="#FinalintegrationusingUITabBarControllerasContainerViewController">Final integration using UITabBarController as Container View Controller</a></li>
<li>2.5. <a href="#Conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
<!-- vscode-markdown-toc-config
	numbering=true
	autoSave=true
	/vscode-markdown-toc-config -->
<!-- /vscode-markdown-toc -->
<h2 id="1-a-nameiosappuitableviewcontrolleraä¸ºios-app-æ„å»ºä¸€ä¸ªé€šç”¨çš„å¯é‡ç”¨çš„uitableviewcontroller">1. <a name='iOSAPPUITableViewController'></a>ä¸ºiOS APP æ„å»ºä¸€ä¸ªé€šç”¨çš„å¯é‡ç”¨çš„UITableViewController</h2>
<p>TableView Controlleræ˜¯ä¸€ä¸ªåŸºæœ¬çš„UIKitç»„ä»¶ï¼Œå‡ ä¹åœ¨æ¯ä¸ªiOSåº”ç”¨ä¸­éƒ½ä½¿ç”¨å®ƒæ¥åœ¨åˆ—è¡¨ä¸­å‘ˆç°æ•°æ®é›†åˆã€‚å½“æˆ‘ä»¬æƒ³è¦åœ¨UITableViewControllerä¸­æ˜¾ç¤ºä¸åŒç±»å‹çš„æ•°æ®æ—¶ï¼Œå¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°å­ç±»æ¥æ˜¾ç¤ºç›¸å…³ç±»å‹çš„æ•°æ®ã€‚è¿™ç§æ–¹æ³•å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯å¦‚æœåº”ç”¨ç¨‹åºä¸­æœ‰è®¸å¤šä¸åŒç±»å‹çš„æ•°æ®ï¼Œåˆ™å¯èƒ½å¯¼è‡´é‡å¤å’Œç»´æŠ¤å›°éš¾ã€‚</p>
<p>æˆ‘ä»¬è¯¥å¦‚ä½•å¤„ç†å’Œè§£å†³è¿™ä¸ªé—®é¢˜å‘¢?å…¶ä¸­ä¸€ç§æ–¹æ³•æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç®€å•çš„æŠ½è±¡ä½¿ç”¨Swifté€šç”¨æŠ½è±¡æ•°æ®ç±»å‹æ¥åˆ›å»ºé€šç”¨UITableViewControllerå­ç±»ï¼Œä½¿ç”¨Swifté€šç”¨çº¦æŸå¯ä»¥ç”¨æ¥é…ç½®å’Œæ˜¾ç¤ºä¸åŒç±»å‹çš„æ•°æ®ã€‚</p>
<h2 id="2-a-namebuildingthegenerictableviewcontrollerabuilding-the-generic-tableviewcontroller">2. <a name='BuildingtheGenericTableViewController'></a>Building the Generic TableViewController</h2>
<p>æˆ‘ä»¬åˆ›å»ºUITableViewControllerçš„ä¸€ä¸ªå­ç±»å«åšGenericTableViewControllerï¼Œæˆ‘ä»¬æ·»åŠ äº†2ç§ç±»å‹çš„Generic Tå’ŒCellã€‚æˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªçº¦æŸï¼Œå³Cellå¿…é¡»æ˜¯UITableViewCellçš„å­ç±»ã€‚Tå°†è¢«ç”¨ä½œæ•°æ®çš„æŠ½è±¡ï¼Œè€ŒCellå°†è¢«æ³¨å†Œåˆ°UITableViewï¼Œå‡ºåˆ—ä»¥æ˜¾ç¤ºæ¯ä¸€è¡Œçš„æ•°æ®ä¸ºUITableViewCellã€‚</p>
<pre><code class="language-swift">class GenericTableViewController&lt;T, Cell: UITableViewCell&gt;: UITableViewController {  var items: [T]
  var configure: (Cell, T) -&gt; Void
  var selectHandler: (T) -&gt; Void  
  init(items: [T], configure: @escaping (Cell, T) -&gt; Void, selectHandler: @escaping (T) -&gt; Void) {
    self.items = items
    self.configure = configure
    self.selectHandler = selectHandler
    super.init(style: .plain)
    self.tableView.register(Cell.self, forCellReuseIdentifier: &quot;Cell&quot;)
  }  ...
}
</code></pre>
<p>è®©æˆ‘ä»¬çœ‹ä¸€ä¸‹åˆå§‹åŒ–å™¨ï¼Œå®ƒæ¥å—3ä¸ªå‚æ•°:</p>
<ol>
<li>
<p>Generic Tæ•°ç»„:å®ƒå°†è¢«æŒ‡å®šä¸ºé©±åŠ¨UITableViewDataSourceçš„å®ä¾‹å˜é‡ã€‚</p>
</li>
<li>
<p>Configure closure:è¿™ä¸ªé…ç½®é—­åŒ…å°†åœ¨ä¼ é€’Tæ•°æ®å’ŒCellæ—¶è¢«è°ƒç”¨ï¼Œå½“tableviewå°†Cellä»é˜Ÿåˆ—ä¸­å–å‡ºä»¥æ˜¾ç¤ºåœ¨æ¯ä¸€è¡Œæ—¶ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬è®¾ç½®å¦‚ä½•ä½¿ç”¨æ•°æ®æ˜¾ç¤ºUITableViewCellã€‚(é€šè¿‡åœ¨å‚æ•°ä¸­æ˜¾å¼å£°æ˜Cellçš„ç±»å‹ï¼Œç¼–è¯‘å™¨å°†èƒ½å¤Ÿéšå¼æ¨æ–­Cellçš„ç±»å‹ï¼Œåªè¦å®ƒæ˜¯UITableViewCellçš„å­ç±»)</p>
</li>
<li>
<p>Cellé€‰ä¸­çš„å¤„ç†é—­åŒ…ã€‚å½“ç”¨æˆ·é€‰æ‹©/ç‚¹å‡»å•å…ƒæ ¼ä¸­çš„è¡Œæ—¶ï¼Œå°†é€šè¿‡ä¼ é€’selectedæ¥è°ƒç”¨æ­¤é—­åŒ…ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ å½“ç”¨æˆ·ç‚¹å‡»ä¸€è¡Œæ—¶å°†è°ƒç”¨çš„é€»è¾‘æˆ–æ“ä½œã€‚</p>
</li>
</ol>
<p>åˆå§‹åŒ–å™¨å°†è¿™3ä¸ªå‚æ•°çš„æ¯å·²ä¸ªéƒ½åˆ†é…ä¸ºç±»çš„å®ä¾‹å˜é‡ï¼Œç„¶åå®ƒç”¨ä¸€ä¸ªå¯é‡ç”¨çš„æ ‡è¯†ç¬¦å°†Cellæ³¨å†Œåˆ°UITableViewï¼Œè¿™ä¸ªæ ‡è¯†ç¬¦å¯ä»¥ç”¨æ¥ä¸ºæ•°æ®æºå°†UITableViewCellä»å¯é‡ç”¨é˜Ÿåˆ—å–å‡ºã€‚</p>
<pre><code class="language-swift">class GenericTableViewController&lt;T, Cell: UITableViewCell&gt;: UITableViewController {  ....  //1
  override func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -&gt; Int {
    return items.count
  }  
  
  //2  
  override func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -&gt; UITableViewCell {
    let cell = tableView.dequeueReusableCell(withIdentifier: &quot;Cell&quot;, for: indexPath) as! Cell
    let item = items[indexPath.row]
    configure(cell, item)
    return cell
  }

  //3
  override func tableView(_ tableView: UITableView, didSelectRowAt indexPath: IndexPath) {
    tableView.deselectRow(at: indexPath, animated: true)
    let item = items[indexPath.row]
    selectHandler(item)
  }
}
</code></pre>
<p>ä¸‹é¢æ˜¯æˆ‘ä»¬éœ€è¦è¦†ç›–çš„UITableViewDataSourceå’ŒUITableViewDelegateæ–¹æ³•:</p>
<blockquote>
<ol>
<li><em>tableView:numberOfRowsInSection:</em> : Here we just return the number of data in the array of T object.</li>
<li><em>tableView:cellForRowAtIndexPath:</em> : We dequeue the UITableViewCell using the reusable identifier and then cast it as Cell. Then, we get the data from the T array using the index path row. After that, we invoke the configuration closure passing the cell and the data for it to be customized before displayed.</li>
<li><em>tableView:didSelectRowAtIndexPath:</em> : Here we just get our data from the array using the index path row the invoke the selected handler closure passing the data.</li>
</ol>
</blockquote>
<h3 id="21-a-nameusingthegenerictableviewcontrollerausing-the-generictableviewcontroller">2.1. <a name='UsingtheGenericTableViewController'></a>Using the GenericTableViewController</h3>
<p>ä¸ºäº†å°è¯•ä½¿ç”¨ä¸åŒç±»å‹çš„å¯¹è±¡æ¥ä½¿ç”¨GenericTableViewControllerï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªç®€å•çš„ç»“æ„ä½“ï¼ŒPersonå’ŒFilmã€‚åœ¨æ¯ä¸ªç»“æ„å†…éƒ¨ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé™æ€è®¡ç®—å˜é‡ï¼Œè¯¥å˜é‡å°†ä¸ºæ¯ä¸ªç»“æ„è¿”å›ä¸€ä¸ªç¡¬ç¼–ç å­˜æ ¹å¯¹è±¡æ•°ç»„ã€‚</p>
<pre><code class="language-swift">struct Person {
  let name: String
  static var stubPerson: [Person] {
    return [
      Person(name: &quot;Mark Hamill&quot;),
      Person(name: &quot;Harrison Ford&quot;),
      Person(name: &quot;Carrie Fisher&quot;),
      Person(name: &quot;Hayden Christensen&quot;),
      Person(name: &quot;Ewan McGregor&quot;),
      Person(name: &quot;Natalie Portman&quot;),
      Person(name: &quot;Liam Neeson&quot;)
   ]
  }
}
struct Film {  
  let title: String
  let releaseYear: Int  
  static var stubFilms: [Film] {
    return [
      Film(title: &quot;Star Wars: A New Hope&quot;, releaseYear: 1978),
      Film(title: &quot;Star Wars: Empire Strikes Back&quot;, releaseYear: 1982),
      Film(title: &quot;Star Wars: Return of the Jedi&quot;, releaseYear:  1984),
      Film(title: &quot;Star Wars: The Phantom Menace&quot;, releaseYear: 1999),
      Film(title: &quot;Star Wars: Clone Wars&quot;, releaseYear: 2003),
      Film(title: &quot;Star Wars: Revenge of the Sith&quot;, releaseYear: 2005)]
  }
}
</code></pre>
<h3 id="22-a-namesettingupthepersongenerictableviewcontrollerasetting-up-the-person-generictableviewcontroller">2.2. <a name='SettingUpthePersonGenericTableViewController'></a>Setting Up the Person GenericTableViewController</h3>
<pre><code class="language-swift">let personsVC = GenericTableViewController(items: Person.stubPerson,          configure: { (cell: UITableViewCell, person) in
        cell.textLabel?.text = person.name
    }) { (person) in
        print(person.name)
    }
</code></pre>
<p>æˆ‘ä»¬å°†ä½¿ç”¨æ ‡å‡†çš„UITableViewCell Basicæ ·å¼æ˜¾ç¤ºPersonåˆ—è¡¨ã€‚è¿™é‡Œï¼Œæˆ‘ä»¬å®ä¾‹åŒ–ä¼ é€’Personå¯¹è±¡æ•°ç»„çš„GenericTableViewControllerã€‚å®Œæˆé—­åŒ…ä½¿ç”¨æ ‡å‡†UITableViewCellçš„Cellç±»å‹ï¼Œåœ¨é…ç½®ä¸­ï¼Œæˆ‘ä»¬åªæ˜¯ä½¿ç”¨äººååˆ†é…textLabelæ–‡æœ¬å±æ€§ã€‚å¯¹äºæ‰€é€‰çš„å¤„ç†ç¨‹åºé—­åŒ…ï¼Œæˆ‘ä»¬åªéœ€å°†æ‰€é€‰äººå‘˜çš„åå­—æ‰“å°åˆ°æ§åˆ¶å°ã€‚æ‚¨å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°Swiftéšå¼ç±»å‹å¼•ç”¨çš„å¼ºå¤§åŠŸèƒ½ï¼Œç¼–è¯‘å™¨å°†è‡ªåŠ¨ç”¨Personç»“æ„æ›¿æ¢Tæ³›å‹ã€‚</p>
<h3 id="23-a-namesettingupthefilmgenerictableviewcontrollerasetting-up-the-film-generictableviewcontroller">2.3. <a name='SettingUptheFilmGenericTableViewController'></a>Setting Up the Film GenericTableViewController</h3>
<pre><code class="language-swift">class SubtitleTableViewCell: UITableViewCell {
  override init(style: UITableViewCell.CellStyle, reuseIdentifier: String?) {
    super.init(style: .subtitle, reuseIdentifier: nil)
  }
  ...
}
</code></pre>
<p>å¯¹äºfilmï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å¸¦æœ‰Subtitleæ ·å¼çš„UITableViewCellæ¥æ˜¾ç¤ºå®ƒã€‚ä¸ºäº†èƒ½å¤Ÿåšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªå­ç±»æ¥è¦†ç›–é»˜è®¤æ ·å¼æ¥ä½¿ç”¨Subtitleæ ·å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºSubtitleTableViewCellã€‚</p>
<pre><code class="language-swift">let filmsVC = GenericTableViewController(items: Film.stubFilms, configure: { (cell: SubtitleTableViewCell, film) in
  cell.textLabel?.text = film.title
  cell.detailTextLabel?.text = &quot;\(film.releaseYear)&quot;
}) { (film) in
  print(film.title)
}
</code></pre>
<p>æˆ‘ä»¬å®ä¾‹åŒ–äº†ä¼ å…¥ç”µå½±å¯¹è±¡æ•°ç»„çš„GenericTableViewControllerã€‚å¯¹äºé…ç½®é—­åŒ…ï¼Œæˆ‘ä»¬å°†cellå‚æ•°çš„å•å…ƒæ ¼ç±»å‹æ˜¾å¼è®¾ç½®ä¸ºSubtitleTableViewCellï¼Œç„¶ååœ¨é—­åŒ…å†…éƒ¨ï¼Œæˆ‘ä»¬åªä½¿ç”¨ç”µå½±çš„æ ‡é¢˜å’Œå‘è¡Œå¹´ä»½è®¾ç½®å•å…ƒæ ¼textLabelå’ŒdetailTextLabelæ–‡æœ¬å±æ€§ã€‚å¯¹äºæ‰€é€‰çš„å¤„ç†ç¨‹åºé—­åŒ…ï¼Œæˆ‘ä»¬åªå°†æ‰€é€‰ç”µå½±çš„æ ‡é¢˜æ‰“å°åˆ°æ§åˆ¶å°ã€‚</p>
<h3 id="24-a-namefinalintegrationusinguitabbarcontrollerascontainerviewcontrollerafinal-integration-using-uitabbarcontroller-as-container-view-controller">2.4. <a name='FinalintegrationusingUITabBarControllerasContainerViewController'></a>Final integration using UITabBarController as Container View Controller</h3>
<pre><code class="language-swift">@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {  var window: UIWindow?  
    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {    

    // Instantiate person and film table view controller
    ...    
    let tabVC = UITabBarController(nibName: nil, bundle: nil)
    tabVC.setViewControllers([
      UINavigationController(rootViewController: personsVC),
      UINavigationController(rootViewController: filmsVC)
    ], animated: false)
    
    window = UIWindow(frame: UIScreen.main.bounds)
    window?.rootViewController = tabVC
    window?.makeKeyAndVisible()
   
    return true
  }
}
</code></pre>
<p>ä¸ºäº†åœ¨iOSé¡¹ç›®ä¸­æ˜¾ç¤ºå®ƒï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªUITabBarControllerï¼Œå®ƒåŒ…å«äº†Personå’ŒFilmå®ä¾‹çš„GenericTableViewControllerä½œä¸ºViewControllersã€‚æˆ‘ä»¬å°†æ ‡ç­¾æ æ§åˆ¶å™¨è®¾ç½®ä¸ºUIWindowæ ¹è§†å›¾æ§åˆ¶å™¨ï¼Œå¹¶å°†æ¯ä¸ªé€šç”¨è¡¨è§†å›¾æ§åˆ¶å™¨åµŒå…¥åˆ°UINavigationControllerä¸­ã€‚</p>
<h3 id="25-a-nameconclusionaconclusion">2.5. <a name='Conclusion'></a>Conclusion</h3>
<p>æˆ‘ä»¬æœ€ç»ˆä½¿ç”¨Swiftæ³›å‹ä¸ºUITableViewControlleråˆ›å»ºäº†ä¸€ä¸ªæŠ½è±¡å®¹å™¨ç±»ã€‚è¿™ç§æ–¹æ³•çœŸçš„å¸®åŠ©æˆ‘ä»¬èƒ½å¤Ÿé‡ç”¨ç›¸åŒçš„UITableViewControllerä¸ä¸åŒç±»å‹çš„æ•°æ®æºï¼Œæˆ‘ä»¬ä»ç„¶å¯ä»¥è‡ªå®šä¹‰ä½¿ç”¨é€šç”¨å•å…ƒæ ¼ï¼Œç¬¦åˆUITableViewCellã€‚Swiftæ³›å‹æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„èŒƒä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥åˆ›å»ºä¸€ä¸ªéå¸¸å¼ºå¤§çš„æŠ½è±¡ã€‚åŠ æ²¹å¿«ä¹ï¼ŒåŠ æ²¹ä¸‡å²ï¼ŒåŠ æ²¹ğŸ˜‹ã€‚</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://kayouyou.github.io/tag/cmaFTpdHR/" class="tag">
                    uitableview
                  </a>
                
                  <a href="https://kayouyou.github.io/tag/vpAuLve9x/" class="tag">
                    data sources
                  </a>
                
                  <a href="https://kayouyou.github.io/tag/2aj4ZEUkug/" class="tag">
                    code reuse
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://kayouyou.github.io/post/rxswift-flatmap-de-shi-xian-xi-jie/">
                  <h3 class="post-title">
                    RxSwift: FlatMapçš„å®ç°ç»†èŠ‚
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
