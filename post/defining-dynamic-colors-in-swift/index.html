<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Defining dynamic colors in Swift | Kayouyou&#39;s Den</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/favicon.ico?v=1645866598831">
<link rel="stylesheet" href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="

Defining dynamic colors in Swift

Using system colors
Custom colors
Conclusion




Defining dynamic colors in Swift
åœ¨å¤§..." />
    <meta name="keywords" content="dynamic colors,swiftui" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git">
        <img src="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/images/avatar.png?v=1645866598831" class="site-logo">
        <h1 class="site-title">Kayouyou&#39;s Den</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      The wise build bridges, while the foolish build barriers.
    </div>
    <div class="site-footer">
      è±«ICPå¤‡2021012281å·-1  | <a class="rss" href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Defining dynamic colors in Swift</h2>
            <div class="post-date">2021-08-18</div>
            
            <div class="post-content" v-pre>
              <!-- TOC -->
<ul>
<li><a href="#defining-dynamic-colors-in-swift">Defining dynamic colors in Swift</a>
<ul>
<li><a href="#using-system-colors">Using system colors</a></li>
<li><a href="#custom-colors">Custom colors</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h1 id="defining-dynamic-colors-in-swift">Defining dynamic colors in Swift</h1>
<p>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œå¯ä»¥è¯´ç°ä»£iOSå’ŒMacåº”ç”¨åœ¨<strong>light</strong>æ¨¡å¼æˆ–<strong>dark</strong>æ¨¡å¼ä¸‹éƒ½èƒ½å¾ˆå¥½åœ°é€‚åº”ç”¨æˆ·è¿è¡Œçš„è®¾å¤‡ï¼Œè¿™é€šå¸¸è¦æ±‚æˆ‘ä»¬åœ¨UIä¸­ä½¿ç”¨æ›´åŠ¨æ€çš„é¢œè‰²ã€‚</p>
<p>è™½ç„¶è‹¹æœä½¿ç”¨<em>Xcode</em>çš„<strong>asset</strong>ç›®å½•æ¥ç³»ç»Ÿå£°æ˜è¿™ç§åŠ¨æ€é¢œè‰²æ˜¯ç›¸å½“ç›´æ¥çš„ï¼Œä½†æœ‰æ—¶æˆ‘ä»¬å¯èƒ½æƒ³è¦åœ¨Swiftä»£ç ä¸­<strong>inline</strong>å®šä¹‰é¢œè‰²ã€‚è®©æˆ‘ä»¬å‘ç°ä¸€äº›æ–¹æ³•æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨SwiftUIæˆ–UIKitã€‚</p>
<h2 id="using-system-colors">Using system colors</h2>
<p>ä¹Ÿè®¸ç¡®ä¿æˆ‘ä»¬çš„é¢œè‰²é€‚åº”å„ç§ç”¨æˆ·åå¥½çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯å°½å¯èƒ½ä½¿ç”¨ä½œä¸ºUIKitå’ŒSwiftUIçš„ä¸€éƒ¨åˆ†çš„é¢„å®šä¹‰é¢œè‰²ã€‚æ‰€æœ‰SwiftUIçš„å†…ç½®é¢œè‰²é»˜è®¤éƒ½æ˜¯è‡ªé€‚åº”çš„ï¼Œå¯¹äºæ‰€æœ‰ä»¥systemä¸ºå‰ç¼€çš„UIColor apiä¹Ÿæ˜¯å¦‚æ­¤:</p>
<pre><code class="language-swift">// SwiftUI
label.foregroundColor(.orange)

// UIKit
label.textColor = .systemOrange
</code></pre>
<p>è™½ç„¶ä¸Šé¢çš„æ ‡ç­¾æ€»æ˜¯æœ‰ä¸€ä¸ªæ©™è‰²çš„æ–‡æœ¬é¢œè‰²ï¼Œä½†å…·ä½“ä½¿ç”¨çš„æ©™è‰²é˜´å½±ä¼šæ ¹æ®ç”¨æˆ·çš„è®¾å¤‡æ˜¯ä½¿ç”¨æ·±è‰²è¿˜æ˜¯æµ…è‰²æ¨¡å¼ï¼Œä»¥åŠæ˜¯å¦å¯ç”¨äº†æŸäº›å¯è®¿é—®æ€§è®¾ç½®(å¦‚å¢åŠ å¯¹æ¯”åº¦)è€Œå˜åŒ–ã€‚</p>
<p>SwiftUIå’ŒUIKitä¹Ÿæä¾›äº†ä¸€å¥—æ›´æŠ½è±¡çš„é¢œè‰²ï¼Œç„¶ååœ¨è¿è¡Œæ—¶è§£æä¸ºç‰¹å®šçš„ã€ä¸ä¸Šä¸‹æ–‡ç›¸å…³çš„é¢œè‰²ã€‚ ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨SwiftUIæ—¶ï¼Œä¸»è‰²å’Œæ¬¡è‰²åœ¨å¤„ç†æ–‡æœ¬æ—¶é€šå¸¸ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä¼šè®©æˆ‘ä»¬çš„æ–‡æœ¬é¢œè‰²ä¸ç³»ç»Ÿä¸­ä½¿ç”¨çš„é¢œè‰²ç›¸åŒ¹é…:</p>
<pre><code class="language-swift">struct ArticleListItem: View {
    var article: Article
    
    var body: some View {
        VStack(alignment: .leading, spacing: 10) {
            Text(article.title)
                .font(.headline)
                .foregroundColor(.primary)
            Text(article.description)
                .foregroundColor(.secondary)
        }
        .padding()
    }
}
</code></pre>
<figure data-type="image" tabindex="1"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gtkq5lqifrj60ce07c0t402.jpg" alt="avatar" loading="lazy"></figure>
<p>UIKitåŒ…å«äº†ä¸€ç»„æ›´å…¨é¢çš„ä¸Šä¸‹æ–‡é¢œè‰²ï¼Œè¿™äº›é¢œè‰²ä¸æŸäº›ç³»ç»Ÿç»„ä»¶ä½¿ç”¨çš„é»˜è®¤é¢œè‰²å…³è”æ›´å¤§ã€‚ å› æ­¤ï¼Œåœ¨ä½¿ç”¨UIColoræ—¶ï¼ŒSwiftUIçš„åŸè‰²å’Œæ¬¡è‰²çš„ç­‰æ•ˆå€¼è¢«ç§°ä¸ºlabelå’ŒsecondaryLabel:</p>
<pre><code class="language-swift">label.textColor = .label
detailLabel.textColor = .secondaryLabel
view.backgroundColor = .systemBackground
</code></pre>
<h2 id="custom-colors">Custom colors</h2>
<p>è™½ç„¶ç³»ç»Ÿæä¾›çš„é¢œè‰²ç»å¯¹æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„èµ·ç‚¹ï¼Œä½†æˆ‘ä»¬å¯èƒ½è¿˜æƒ³åœ¨æ¯ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ä¸€äº›å®Œå…¨è‡ªå®šä¹‰çš„é¢œè‰²ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜éœ€è¦ä½¿è¿™äº›é¢œè‰²é€‚åº”ç”¨æˆ·å½“å‰çš„é…è‰²æ–¹æ¡ˆã€‚</p>
<p>ä¸€ç§æ–¹æ³•æ˜¯è®©æˆ‘ä»¬çš„UIä»£ç è§‚å¯Ÿé¢œè‰²æ–¹æ¡ˆä½•æ—¶å‘ç”Ÿå˜åŒ–ï¼Œç„¶åæ›´æ–°ä»»ä½•éœ€è¦è°ƒæ•´çš„è‡ªå®šä¹‰é¢œè‰²ã€‚ ä¾‹å¦‚åœ¨ä½¿ç”¨SwiftUIæ—¶:</p>
<pre><code class="language-swift">struct ArticleListItem: View {
    var article: Article
    @Environment(\.colorScheme) private var colorScheme
    
    var body: some View {
        VStack(alignment: .leading, spacing: 10) {
            Text(article.title)
                .font(.headline)
                .foregroundColor(titleColor)
            Text(article.description)
                .foregroundColor(.secondary)
        }
        .padding()
    }
    
    private var titleColor: Color {
        switch colorScheme {
        case .light:
            return Color(white: 0.2)
        case .dark:
            return Color(white: 0.8)
        @unknown default:
            return Color(white: 0.2)
        }
    }
}
</code></pre>
<blockquote>
<p>å½“ä½¿ç”¨UIKitæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¦†ç›–ä¸€ä¸ªè§†å›¾æˆ–è§†å›¾æ§åˆ¶å™¨ä¸­çš„<strong>traitCollectionDidChange(_ğŸ˜ƒ<strong>æ–¹æ³•æ¥æ‰§è¡ŒåŒæ ·çš„è§‚å¯Ÿã€‚ç„¶åæˆ‘ä»¬å¯ä»¥æ‰“å¼€ä¼ å…¥çš„ç‰¹å¾é›†åˆçš„</strong>userInterfaceStyleã€‚</strong></p>
</blockquote>
<p>ç„¶è€Œï¼Œå°½ç®¡ä¸Šè¿°æŠ€æœ¯ç¡®å®æœ‰æ•ˆï¼Œä½†å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨è®¸å¤šä¸åŒçš„è§†å›¾ä¸­æ‰§è¡Œç›¸åŒçš„è§‚å¯Ÿï¼Œé‚£ä¹ˆäº‹æƒ…å¾ˆå¿«å°±ä¼šå˜å¾—éå¸¸æ··ä¹±å’Œé‡å¤ã€‚åœ¨ä½¿ç”¨SwiftUIæ—¶ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯åˆ›å»ºä¸€ä¸ªå¯é‡ç”¨çš„<strong>view modifier</strong>ï¼Œè®©æˆ‘ä»¬ä¸ºæ˜æš—æ¨¡å¼æŒ‡å®šå•ç‹¬çš„å‰æ™¯è‰²ï¼Œç„¶åè®©æˆ‘ä»¬çš„ä¿®æ”¹å™¨åœ¨å†…éƒ¨è§‚å¯Ÿå½“å‰çš„é¢œè‰²æ–¹æ¡ˆâ€”â€”åƒè¿™æ ·:</p>
<pre><code class="language-swift">struct AdaptiveForegroundColorModifier: ViewModifier {
    var lightModeColor: Color
    var darkModeColor: Color
    
    @Environment(\.colorScheme) private var colorScheme
    
    func body(content: Content) -&gt; some View {
        content.foregroundColor(resolvedColor)
    }
    
    private var resolvedColor: Color {
        switch colorScheme {
        case .light:
            return lightModeColor
        case .dark:
            return darkModeColor
        @unknown default:
            return lightModeColor
        }
    }
}

extension View {
    func foregroundColor(
        light lightModeColor: Color,
        dark darkModeColor: Color
    ) -&gt; some View {
        modifier(AdaptiveForegroundColorModifier(
            lightModeColor: lightModeColor, 
            darkModeColor: darkModeColor
        ))
    }
}
</code></pre>
<p>æœ‰äº†ä¸Šé¢çš„ä¿®é¥°ç¬¦ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥è½»æ¾åœ°æŒ‡å®šæˆ‘ä»¬çš„è‡ªé€‚åº”å‰æ™¯é¢œè‰²å†…è”åœ¨æˆ‘ä»¬çš„è§†å›¾ä¸­ï¼Œè€Œä¸éœ€è¦ä»»ä½•è§‚å¯Ÿæˆ–åœ¨æ¯ä¸ªè°ƒç”¨ç«™ç‚¹çš„å…¶ä»–å¤æ‚æ€§:</p>
<pre><code class="language-swift">struct ArticleListItem: View {
    var article: Article
    
    var body: some View {
        VStack(alignment: .leading, spacing: 10) {
            Text(article.title)
                .font(.headline)
                .foregroundColor(
                    light: Color(white: 0.2),
                    dark: Color(white: 0.8)
                )
            Text(article.description)
                .foregroundColor(.secondary)
        }
        .padding()
    }
}
</code></pre>
<p>å¦‚æœæˆ‘ä»¬åªæ˜¯æƒ³ä¸é¢œè‰²åœ¨ä¸€ç»„æœ‰é™çš„æ–¹é¢é‚£ä¸Šè¿°æŠ€æœ¯æ˜¯éå¸¸æœ‰ç”¨çš„,ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦å®šåˆ¶å„ç§é¢œè‰²â€”â€”å‰æ™¯,èƒŒæ™¯,ç€è‰²,æŠšæ‘¸å’Œå¡«å……å½¢çŠ¶ç­‰ç­‰,é‚£ä¹ˆæˆ‘ä»¬å¯èƒ½è¦æƒ³å‡ºä¸€ä¸ªæ›´é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚</p>
<p>ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥è½¬è€Œä½¿ç”¨UIColorï¼Œå®ƒæä¾›äº†ä¸€ç§ç”¨åŠ¨æ€é—­åŒ…åˆå§‹åŒ–é¢œè‰²çš„æ–¹æ³•ï¼Œå½“å½“å‰æ´»åŠ¨çš„UITraitCollectionè¢«æ›´æ”¹æ—¶ï¼Œç³»ç»Ÿå°†è°ƒç”¨è¿™ä¸ªåŠ¨æ€é—­åŒ…ã€‚è¿™åè¿‡æ¥ä½¿æˆ‘ä»¬èƒ½å¤Ÿå®ç°ä¸€ä¸ªè‡ªå®šä¹‰åˆå§‹åŒ–å™¨â€”â€”å°±åƒæˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„æ¨¡å¼ä¸€æ ·â€”â€”è®©æˆ‘ä»¬æŒ‡å®šå•ç‹¬çš„<strong>light</strong>æ¨¡å¼å’Œ<strong>dark</strong>æ¨¡å¼é¢œè‰²ï¼Œç„¶åæ ¹æ®å½“å‰traité›†åˆçš„<strong>userInterfaceStyle</strong>æ¥è§£æ:</p>
<pre><code class="language-swift">extension UIColor {
    convenience init(
        light lightModeColor: @escaping @autoclosure () -&gt; UIColor,
        dark darkModeColor: @escaping @autoclosure () -&gt; UIColor
     ) {
        self.init { traitCollection in
            switch traitCollection.userInterfaceStyle {
            case .light:
                return lightModeColor()
            case .dark:
                return darkModeColor()
            @unknown default:
                return lightModeColor()
            }
        }
    }
}
</code></pre>
<blockquote>
<p>ä¸Šè¿°è§£å†³æ–¹æ¡ˆçš„ä¸€ä¸ªå¾ˆå¤§çš„å¥½å¤„æ˜¯ï¼Œå®ƒå¯ä»¥å¾ˆå®¹æ˜“åœ°æ‰©å±•åˆ°è€ƒè™‘å…¶ä»–ç±»å‹çš„ç‰¹å¾(å¦‚å„ç§å¯è®¿é—®æ€§è®¾ç½®)ï¼Œå› ä¸ºæˆ‘ä»¬ä¼ é€’çš„<strong>UITraitCollection</strong>å®ä¾‹åŒ…å«äº†æ›´å¤šçš„ä¿¡æ¯ï¼Œè€Œä¸ä»…ä»…æ˜¯ä½¿ç”¨çš„é¢œè‰²æ–¹æ¡ˆã€‚</p>
</blockquote>
<p>çœŸæ­£äº†ä¸èµ·çš„æ˜¯ï¼ŒSwiftUIçš„Colorå’ŒUIColorå¯ä»¥å¾ˆå®¹æ˜“åœ°è¿æ¥èµ·æ¥â€”â€”è¿™æ„å‘³ç€æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨å¾ˆå°‘çš„é¢å¤–ä»£ç ä½¿ä¸Šè¿°è§£å†³æ–¹æ¡ˆå®Œå…¨å…¼å®¹SwiftUI:</p>
<pre><code class="language-swift">extension Color {
    init(
        light lightModeColor: @escaping @autoclosure () -&gt; Color,
        dark darkModeColor: @escaping @autoclosure () -&gt; Color
    ) {
        self.init(UIColor(
            light: UIColor(lightModeColor()),
            dark: UIColor(darkModeColor())
        ))
    }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼Œåœ¨iOS 15 SDKä¸­ï¼Œä¸Šé¢çš„Coloråˆå§‹åŒ–å™¨å·²ç»è¢«å¼ƒç”¨ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ä¸€ä¸ªåä¸ºinit(uiColor:)çš„æ–°ç‰ˆæœ¬ï¼Œå…¶å·¥ä½œæ–¹å¼å®Œå…¨ç›¸åŒã€‚</p>
</blockquote>
<p>åœ¨ä¸Šé¢çš„åœ°æ–¹ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥åˆ›å»ºè‡ªé€‚åº”é¢œè‰²å’ŒUIColorå®ä¾‹ï¼Œåªè¦è¿™æ ·åš:</p>
<pre><code class="language-swift">struct ArticleListItem: View {
    var article: Article
    
    var body: some View {
        VStack(alignment: .leading, spacing: 10) {
            Text(article.title)
                .font(.headline)
                .foregroundColor(Color(
                    light: Color(white: 0.2),
                    dark: Color(white: 0.8)
                ))
            Text(article.description)
                .foregroundColor(.secondary)
        }
        .padding()
    }
}
</code></pre>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦æ›´è¿›ä¸€æ­¥ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å°†é¢œè‰²å®šä¹‰ä»è§†å›¾ä¸­å®Œå…¨æŠ½è±¡å‡ºæ¥ï¼Œå°†å®ƒä»¬ç§»åˆ°é™æ€å±æ€§ä¸­ï¼Œä¸ä½œä¸ºç³»ç»Ÿä¸€éƒ¨åˆ†çš„ä¸»è¦ã€æ¬¡è¦å’Œå…¶ä»–åŠ¨æ€é¢œè‰²å…·æœ‰ç›¸åŒçš„ä½œç”¨:</p>
<pre><code class="language-swift">extension Color {
    static var title: Self {
        Self(light: Color(white: 0.2),
             dark: Color(white: 0.8))
    }
}
</code></pre>
<p>ä»¥ä¸Šç»å¯¹æ˜¯æˆ‘åœ¨æ„å»ºåº”ç”¨ç¨‹åºæ—¶æ›´å–œæ¬¢ä½¿ç”¨çš„æ¶æ„ã€‚é€šè¿‡å°†æ¯ç§é¢œè‰²å…³è”åˆ°æ ‡é¢˜ã€èƒŒæ™¯ã€appTintç­‰å±æ€§ä¸­ï¼Œæˆ‘å‘ç°ä¿æŒåº”ç”¨ç¨‹åºçš„é¢œè‰²ä¸€è‡´å’Œç»„ç»‡è‰¯å¥½è¦å®¹æ˜“å¾—å¤šã€‚</p>
<h2 id="conclusion">Conclusion</h2>
<p>ä¸€å¼€å§‹ï¼Œå®šä¹‰è‡ªå®šä¹‰é¢œè‰²ä¼¼ä¹æ˜¯ä¸€ä¸ªç®€å•çš„é—®é¢˜ï¼Œä½†éšç€è¿è¡Œåº”ç”¨ç¨‹åºçš„æ‰§è¡Œç¯å¢ƒå˜å¾—è¶Šæ¥è¶ŠåŠ¨æ€ï¼Œæˆ‘ä»¬å¿…é¡»è®©é¢œè‰²é€‚åº”è¿™äº›ç”±äºä¸åŒçš„ç¯å¢ƒå¯èƒ½ä¼šç»§ç»­å¢åŠ çš„å¤æ‚æ€§ã€‚</p>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/tag/Q5zZMmeDc/" class="tag">
                    dynamic colors
                  </a>
                
                  <a href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/tag/iupH-uWSrW/" class="tag">
                    swiftui
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://e.coding.net/kayouyou/kayouyoublog/KayouyouBlog.git/post/expert-swift-chapter-2-types-and-mutation/">
                  <h3 class="post-title">
                    Expert Swift - Chapter 2: Types &amp; Mutation
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
