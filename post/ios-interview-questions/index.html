<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>iOS Interview Questions | Kayouyou&#39;s Den</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://kayouyou.github.io/favicon.ico?v=1663232760640">
<link rel="stylesheet" href="https://kayouyou.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="

iOS Interview Questions

1. Difference between a category and extension in objective C?
2. Fallthrough keyword in swif..." />
    <meta name="keywords" content="interview" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://kayouyou.github.io">
        <img src="https://kayouyou.github.io/images/avatar.png?v=1663232760640" class="site-logo">
        <h1 class="site-title">Kayouyou&#39;s Den</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            é¦–é¡µ
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            å½’æ¡£
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            å…³äº
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      The wise build bridges, while the foolish build barriers.
    </div>
    <div class="site-footer">
      è±«ICPå¤‡2021012281å·-1  | <a class="rss" href="https://kayouyou.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">iOS Interview Questions</h2>
            <div class="post-date">2021-05-26</div>
            
            <div class="post-content" v-pre>
              <!-- TOC -->
<ul>
<li><a href="#ios-interview-questions">iOS Interview Questions</a>
<ul>
<li><a href="#1-difference-between-a-category-and-extension-in-objective-c">1. Difference between a category and extension in objective C?</a></li>
<li><a href="#2-fallthrough-keyword-in-swift">2. Fallthrough keyword in swift?</a></li>
<li><a href="#3-how-to-make-a-method-inside-a-protocol-optional-in-swift">3. How to make a method inside a protocol optional in swift?</a></li>
<li><a href="#4-reverse-a-string-without-using-reversed-in-built-function">4. Reverse a string without using â€œreversed()â€ in-built function</a></li>
<li><a href="#5-explain-the-class-hierarchy-of-uibutton">5. Explain the class hierarchy of UIButton.</a></li>
<li><a href="#6-superclass-of-uiviewcontroller">6. SuperClass of UIViewController?</a></li>
<li><a href="#7-superclass-of-uiwindow">7. SuperClass of UIWindow?</a></li>
<li><a href="#8-difference-between-self-and-self-in-swift">8. Difference between Self and self in Swift?</a></li>
<li><a href="#9-what-is-the-difference-between-static-vs-class-functionsvariables-in-swift-classes">9. What is the difference between static vs class functions/variables in Swift classes?</a></li>
<li><a href="#10-explain-the-final-keyword-or-how-can-we-prevent-overrides--subclassing-in-a-class">10. Explain the final keyword orâ€¦ How can we prevent overrides &amp; subclassing in a class?</a></li>
<li><a href="#11-explain-atomicity-in-both-objective-c-and-swift">11. Explain atomicity in both Objective-C and swift?</a></li>
<li><a href="#12-what-is-a-singleton-pattern-how-to-create-one-in-swift">12. What is a Singleton pattern? How to create one in swift?</a></li>
<li><a href="#13-can-enums-have-stored-properties">13. Can enums have stored properties?</a></li>
<li><a href="#14-can-we-make-a-let-as-weak">14. Can we make a let as weak</a></li>
<li><a href="#15-can-we-make-a-let-as-unowned">15. Can we make a let as unowned</a></li>
<li><a href="#16-what-is-optional-chaining">16. What is Optional Chaining?</a></li>
<li><a href="#17-bounds-vs-nativebounds">17. Bounds vs nativeBounds?</a></li>
<li><a href="#18-how-to-resolve-strong-reference-cycles-between-class-instances">18. How to resolve Strong Reference Cycles Between Class Instances?</a>
<ul>
<li><a href="#weak-references-person--apartment">Weak References (Person &amp; Apartment)</a></li>
<li><a href="#unowned-references-customer--creditcard">Unowned References (Customer &amp; CreditCard)</a></li>
<li><a href="#unowned-optional-references-department--course">Unowned Optional References (Department &amp; Course)</a></li>
<li><a href="#unowned-references-and-implicitly-unwrapped-optional-properties-country--city">Unowned References and Implicitly Unwrapped Optional Properties (Country &amp; City)</a></li>
</ul>
</li>
<li><a href="#19-what-is-existential-in-protocol">19. What is existential in Protocol?</a></li>
<li><a href="#20-explain-existential-and-associated-type-about-protocol">20. Explain existential and associated type about Protocol</a></li>
<li><a href="#21-explain-the-difference-between-methods-declared-in-the-protocol-and-those-declared-in-the-protocol-extension">21. Explain the difference between methods declared in the Protocol and those declared in the Protocol extension</a></li>
<li><a href="#22-how-to-type-erasure-using-closures-replace-using-class-in-swift">22. How to type erasure using closures replace using class in Swift</a>
<ul>
<li><a href="#1-%E9%80%9A%E8%BF%87%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8C%85%E8%A3%85%E7%B1%BB%E6%9D%A5%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4">1. é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…ç±»æ¥å®ç°ç±»å‹æ“¦é™¤</a></li>
<li><a href="#2-%E9%80%9A%E8%BF%87%E9%97%AD%E5%8C%85%E5%AE%9E%E7%8E%B0%E7%B1%BB%E5%9E%8B%E6%93%A6%E9%99%A4">2. é€šè¿‡é—­åŒ…å®ç°ç±»å‹æ“¦é™¤</a></li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
</li>
<li><a href="#23-how-to-create-a-mixed-type-array-in-swift">23. How to create a mixed-type array in Swift?</a>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8any">1. ä½¿ç”¨Any</a></li>
<li><a href="#2-%E4%BD%BF%E7%94%A8protocol">2. ä½¿ç”¨Protocol</a>
<ul>
<li><a href="#protocol-%E7%BB%A7%E6%89%BF">Protocol ç»§æ‰¿</a></li>
<li><a href="#protocol-%E7%BB%84%E5%90%88">Protocol ç»„åˆ</a></li>
</ul>
</li>
<li><a href="#3-%E4%BD%BF%E7%94%A8enum">3. ä½¿ç”¨Enum</a></li>
<li><a href="#4-%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8enum%E5%92%8Cstruct">4. ç»„åˆä½¿ç”¨Enumå’ŒStruct</a></li>
</ul>
</li>
<li><a href="#%E7%9B%B8%E5%85%B3%E8%B5%84%E6%BA%90">ç›¸å…³èµ„æºï¼š</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->
<h2 id="ios-interview-questions">iOS Interview Questions</h2>
<h3 id="1-difference-between-a-category-and-extension-in-objective-c">1. Difference between a category and extension in objective C?</h3>
<p>å³ä½¿æ‚¨æ²¡æœ‰åŸå§‹çš„å®ç°æºä»£ç ï¼Œä¹Ÿå¯ä»¥ä¸ºä»»ä½•ç±»å£°æ˜categoryã€‚</p>
<p>ç±»extensionä¸categoryæœ‰ä¸€äº›ç›¸ä¼¼ä¹‹å¤„ï¼Œä½†å®ƒåªèƒ½æ·»åŠ åˆ°ç¼–è¯‘æ—¶å…·æœ‰æºä»£ç çš„ç±»ä¸­(ç±»ä¸ç±»extensionåŒæ—¶ç¼–è¯‘)ã€‚</p>
<p>categoryå…è®¸æ‚¨åœ¨ä¸»æ¥å£æ–‡ä»¶ä¹‹å¤–æ·»åŠ æ–¹æ³•ã€‚ è€Œextensionå¿…é¡»åœ¨ä¸»æ¥å£æ–‡ä»¶ä¸­å®ç°ã€‚ è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æœ‰æŠŠæ¡åœ°å¾—å‡ºç»“è®ºï¼Œä½ ä¸èƒ½ä½¿ç”¨extensionæ¥æ‰©å±•å†…ç½®ç±»æˆ–æ²¡æœ‰æºä»£ç çš„ç±»ï¼Œåœ¨é‚£é‡Œä½ åº”è¯¥ä½¿ç”¨categoryã€‚è¦ä½¿ç”¨extensionsï¼Œæ‚¨éœ€è¦è®¿é—®æ‰€æ‰©å±•çš„ç±»çš„æºä»£ç ã€‚</p>
<figure data-type="image" tabindex="1"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gqw6ota5c6j30po0bkt96.jpg" alt="avatar" loading="lazy"></figure>
<h3 id="2-fallthrough-keyword-in-swift">2. Fallthrough keyword in swift?</h3>
<p>åœ¨Swiftä¸­ï¼Œswitchè¯­å¥ä¸ä¼šè½ç©ºåˆ°æ¯ä¸€ç§æƒ…å†µçš„åº•éƒ¨å¹¶è¿›å…¥ä¸‹ä¸€ç§æƒ…å†µã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ç¬¬ä¸€ä¸ªåŒ¹é…çš„caseå®Œæˆæ—¶ï¼Œæ•´ä¸ªswitchè¯­å¥å°±å®Œæˆäº†å®ƒçš„æ‰§è¡Œã€‚</p>
<p>åœ¨swiftä¸­ï¼Œ<strong>fallthrough</strong>è¯­å¥ç”¨äºswitch caseæ‰§è¡Œcaseè¯­å¥ï¼Œæ ¹æ®æˆ‘ä»¬çš„éœ€æ±‚åœ¨åŒ¹é…çš„caseè¯­å¥æ—è¾¹æ‰§è¡Œcaseè¯­å¥ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gqw6stvbv4j310i0mswg8.jpg" alt="avatar" loading="lazy"></figure>
<blockquote>
<p><strong>fallthrough</strong>å…³é”®å­—ä¸ä¼šæ£€æŸ¥å®ƒå¯¼è‡´æ‰§è¡Œè½å…¥çš„switch caseçš„caseæ¡ä»¶ã€‚<strong>fallthrough</strong>å…³é”®å­—åªä¼šå¯¼è‡´ä»£ç æ‰§è¡Œç›´æ¥ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªcase(æˆ–é»˜è®¤case)å—å†…çš„è¯­å¥ï¼Œå°±åƒCçš„æ ‡å‡†switchè¯­å¥è¡Œä¸ºä¸€æ ·ã€‚</p>
</blockquote>
<h3 id="3-how-to-make-a-method-inside-a-protocol-optional-in-swift">3. How to make a method inside a protocol optional in swift?</h3>
<p>æˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•ã€‚</p>
<ol>
<li>
<p>çº¯swiftæ–¹å¼åº”è¯¥ç±»ä¼¼äºä½¿ç”¨åè®®æ‰©å±•æä¾›é»˜è®¤å®ç°ã€‚</p>
</li>
<li>
<p>Objective-Cå…¼å®¹çš„æ–¹å¼æ˜¯ä½¿ç”¨@objcå’Œoptionalå…³é”®å­—ã€‚</p>
</li>
</ol>
<figure data-type="image" tabindex="3"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gqw6xw6w8mj30tq0i6aba.jpg" alt="avatar" loading="lazy"></figure>
<p><em><strong>Important</strong></em>: Objcå…¼å®¹æ–¹å¼çš„ç¼ºç‚¹æ˜¯ä¸Šé¢ä¾‹å­ä¸­çš„MyProtocolObjcå˜æˆäº†ä¸€ä¸ªç±»åè®®ã€‚ç»“æ„ä½“ä¸èƒ½ç¬¦åˆæ­¤åè®®ã€‚</p>
<figure data-type="image" tabindex="4"><img src="https://tva1.sinaimg.cn/large/008i3skNgy1gqw6ztxxihj310604udg0.jpg" alt="avatar" loading="lazy"></figure>
<p>Error: éç±»ç±»å‹' SomeStruct 'ä¸èƒ½ç¬¦åˆç±»åè®®' MyProtocolObjc '</p>
<h3 id="4-reverse-a-string-without-using-reversed-in-built-function">4. Reverse a string without using â€œreversed()â€ in-built function</h3>
<p>å¦‚æœé¢è¯•å®˜è®©ä½ æŠŠä»£ç å†™åœ¨çº¸ä¸Šï¼Œé‚£å°±å½“åœºæ€äº†ä»–ğŸ”«ğŸ’£ğŸ”ªã€‚å¯¹æˆ‘æ¥è¯´ï¼Œåœ¨æ²¡æœ‰xcodeçš„æƒ…å†µä¸‹ç¼–å†™ä¼˜åŒ–çš„ä»£ç æ˜¯éå¸¸å›°éš¾çš„ã€‚</p>
<p>ä¸Šæ¬¡æœ‰äººé—®è¿™ä¸ªé—®é¢˜çš„æ—¶å€™ï¼Œæˆ‘é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯è¿™ä¸ªã€‚</p>
<pre><code class="language-swift">extension String {
    func reverse() -&gt; String {
        var tempString = â€œâ€
        for char in self {
            tempString = String(char) + tempString
        }
        return tempString
    }
}
</code></pre>
<p>ä½ å¯ä»¥åœ¨å­—ç¬¦ä¸²ä¸Šä½¿ç”¨é«˜é˜¶å‡½æ•°â€œReduceâ€æ¥å®ç°è¿™ä¸ªé€»è¾‘ã€‚ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥</p>
<pre><code class="language-swift">extension String {
    func reverse() -&gt; String  { 
        return self.reduce(&quot;&quot;){ &quot;\($1)&quot; + $0 } 
    }
}
</code></pre>
<h3 id="5-explain-the-class-hierarchy-of-uibutton">5. Explain the class hierarchy of UIButton.</h3>
<p><em><strong>NSObject â†’ UIResponder â†’ UIView â†’ UIControl â†’ UIButton.</strong></em></p>
<blockquote>
<p>UITextField, UITextView, UISlider, UIDatePicker, UIPageControl, UISegmentedControl, UIStepper, UISwitch etc are all inheriting from UIControl</p>
</blockquote>
<p><strong>æ¯ä¸ªè¶…ç±»çš„è§’è‰²å’ŒèŒè´£æ˜¯ä»€ä¹ˆ?</strong></p>
<p><strong>UIResponder</strong>: è´Ÿè´£å“åº”å’Œå¤„ç†äº‹ä»¶çš„æŠ½è±¡ç±»ã€‚ä¸€ä¸ªå“åº”å™¨å®ç°äº†touchesBegan(<em>:with:)ï¼Œ touchesMoved(</em>:with:)ï¼Œç¬¬ä¸€ä¸ªå“åº”å¤„ç†ï¼Œé”®ç›˜ï¼Œå’Œè¾“å…¥ç›¸å…³çš„äº‹ä»¶ç­‰ã€‚</p>
<p><strong>UIView</strong>: ç®¡ç†å±å¹•ä¸ŠçŸ©å½¢åŒºåŸŸå†…å®¹çš„å¯¹è±¡ã€‚</p>
<p><strong>UIControl</strong>: å®ƒæ˜¯æ§ä»¶çš„åŸºç±»ã€‚</p>
<ul>
<li>
<p>å®ƒå¤„ç†è¯¸å¦‚enabled, disabled, focused, highlightedç­‰æ§ä»¶çŠ¶æ€ã€‚</p>
</li>
<li>
<p>å®ƒå¤„ç†åƒtouchDown, touchupInside, valueChanged, UITextFieldç¼–è¾‘äº‹ä»¶ç­‰äº‹ä»¶ã€‚</p>
</li>
<li>
<p>Adding target, removing the target, handling actions etc.</p>
</li>
</ul>
<h3 id="6-superclass-of-uiviewcontroller">6. SuperClass of UIViewController?</h3>
<p><strong>UIResponder â†’ UIViewController</strong></p>
<h3 id="7-superclass-of-uiwindow">7. SuperClass of UIWindow?</h3>
<p><strong>UIView â†’ UIWindow</strong></p>
<h3 id="8-difference-between-self-and-self-in-swift">8. Difference between Self and self in Swift?</h3>
<p>â€˜<strong>Self</strong>â€™åªåœ¨åè®®ä¸­å¯ç”¨ï¼Œæˆ–ä½œä¸ºç±»ä¸­çš„æ–¹æ³•çš„ç»“æœã€‚</p>
<p>Reference: <a href="https://www.hackingwithswift.com/example-code/language/self-vs-self-whats-the-difference">Hacking with swift</a>.</p>
<p>å½“æ‚¨ç¼–å†™åè®®å’Œåè®®æ‰©å±•æ—¶ï¼ŒSelf(å¤§å†™S)å’ŒSelf(å°å†™S)ä¹‹é—´å­˜åœ¨å·®å¼‚ã€‚ å½“ä¸å¤§å†™Sè¿ç”¨æ—¶ï¼ŒSelfæŒ‡çš„æ˜¯ç¬¦åˆåè®®çš„ç±»å‹ï¼Œä¾‹å¦‚: String or Int. å½“ä¸å°å†™Sä¸€èµ·ä½¿ç”¨æ—¶ï¼ŒselfæŒ‡è¯¥ç±»å‹å†…çš„å€¼ï¼Œä¾‹å¦‚â€œhelloâ€æˆ–556ã€‚</p>
<p>NB: BinaryIntegeræ˜¯ä¸€ä¸ªåè®®ã€‚</p>
<pre><code class="language-swift">extension BinaryInteger { 
    func squared() -&gt; Self { 
        return self * self 
    }
}
</code></pre>
<h3 id="9-what-is-the-difference-between-static-vs-class-functionsvariables-in-swift-classes">9. What is the difference between static vs class functions/variables in Swift classes?</h3>
<p>staticå’Œclasséƒ½å°†æ–¹æ³•/å±æ€§ä¸ç±»å…³è”ï¼Œè€Œä¸æ˜¯ç±»çš„å®ä¾‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºå­ç±»å¯ä»¥é‡å†™ class methods; å®ƒä»¬ä¸èƒ½è¦†ç›– static methodã€‚ å› æ­¤ï¼Œåœ¨Classä¸­ï¼Œé™æ€å‡½æ•°å…³é”®å­—å¯ä»¥è¿™æ ·å†™:</p>
<pre><code class="language-swift">final class someFunction()
</code></pre>
<blockquote>
<p>staticåœ¨å†…éƒ¨æ˜¯finalçš„ã€‚<br>
é™æ€æ–¹æ³•æ˜¯é™æ€åˆ†å‘ï¼Œè¿™æ„å‘³ç€ç¼–è¯‘å™¨çŸ¥é“å“ªä¸ªæ–¹æ³•å°†åœ¨è¿è¡Œæ—¶æ‰§è¡Œï¼Œå› ä¸ºé™æ€æ–¹æ³•ä¸èƒ½è¢«é‡å†™ï¼Œè€Œç±»æ–¹æ³•å¯ä»¥æ˜¯åŠ¨æ€åˆ†å‘ï¼Œå› ä¸ºå­ç±»å¯ä»¥é‡å†™è¿™äº›æ–¹æ³•ã€‚</p>
</blockquote>
<h3 id="10-explain-the-final-keyword-or-how-can-we-prevent-overrides-subclassing-in-a-class">10. Explain the final keyword orâ€¦ How can we prevent overrides &amp; subclassing in a class?</h3>
<p>å¯ä»¥é€šè¿‡å°†æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡æ ‡è®°ä¸ºfinalæ¥é˜²æ­¢è¢«overrideã€‚é€šè¿‡åœ¨æ–¹æ³•ã€å±æ€§æˆ–ä¸‹æ ‡çš„ä»‹ç»å…³é”®å­—ä¹‹å‰ç¼–å†™æœ€åçš„ä¿®é¥°ç¬¦æ¥åšåˆ°è¿™ä¸€ç‚¹(such as final var, final func, final class func, and final subscript).</p>
<p>é€šè¿‡åœ¨ç±»å®šä¹‰ä¸­çš„classå…³é”®å­—ä¹‹å‰ç¼–å†™finalä¿®é¥°ç¬¦(final class)ï¼Œå¯ä»¥å°†æ•´ä¸ªç±»æ ‡è®°ä¸ºfinalã€‚ å°†æœ€ç»ˆç±»å­ç±»åŒ–çš„ä»»ä½•å°è¯•éƒ½æŠ¥å‘Šä¸ºç¼–è¯‘æ—¶é”™è¯¯ã€‚</p>
<p>å¦‚å‰æ‰€è¿°ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨staticå…³é”®å­—æ¥å®ç°finalç±»çš„åŠŸèƒ½ã€‚</p>
<p>Reference: <a href="https://stackoverflow.com/questions/29636633/static-vs-class-functions-variables-in-swift-classes/#answer-37770112">StackOverflow</a></p>
<pre><code class="language-swift">class A{
    class func classFunction(){
    }
    static func staticFunction(){
    }
    class func classFunctionToBeMakeFinalInImmediateSubclass(){
    }
}

class B: A {
    override class func classFunction(){

    }

    //Compile Error. Class method overrides a 'final' class method
    override static func staticFunction(){

    }

    //Lets avoid the function called 'classFunctionToBeMakeFinalInImmediateSubclass' being overriden by subclasses
    /* First way of doing it
    override static func classFunctionToBeMakeFinalInImmediateSubclass(){
    }
    */

    // Second way of doing the same
    override final class func classFunctionToBeMakeFinalInImmediateSubclass(){
    }

    //To use static or final class is choice of style.
    //As mipadi suggests I would use. static at super class. and final class to cut off further overrides by a subclass
}

class C: B{
    //Compile Error. Class method overrides a 'final' class method
    override static func classFunctionToBeMakeFinalInImmediateSubclass(){

    }
}
</code></pre>
<h3 id="11-explain-atomicity-in-both-objective-c-and-swift">11. Explain atomicity in both Objective-C and swift?</h3>
<p>Objective - Cçš„é»˜è®¤å€¼:atomic</p>
<p>Swifté»˜è®¤å€¼:non-atomic</p>
<p>å°†å±æ€§å®šä¹‰ä¸ºåŸå­å±æ€§å°†ä¿è¯è¿”å›ä¸€ä¸ªæœ‰æ•ˆå€¼ã€‚å£°æ˜ä¸€ä¸ªåŸå­å±æ€§ä¼šä½¿ç¼–è¯‘å™¨ç”Ÿæˆé¢å¤–çš„ä»£ç æ¥é˜»æ­¢å¯¹è¯¥å±æ€§çš„å¹¶å‘è®¿é—®ã€‚ è¿™æ®µé™„åŠ ä»£ç é”å®šä¸€ä¸ªä¿¡å·é‡(semaphore)ï¼Œç„¶åè·å–æˆ–è®¾ç½®è¯¥å±æ€§ï¼Œç„¶åè§£é”è¯¥ä¿¡å·é‡ã€‚ å¦‚æœçº¿ç¨‹AåŒæ—¶è°ƒç”¨getterï¼Œçº¿ç¨‹Bå’Œçº¿ç¨‹Cä½¿ç”¨ä¸åŒçš„å€¼è°ƒç”¨setterï¼Œçº¿ç¨‹Aå¯ä»¥å¾—åˆ°ä¸‰ä¸ªè¿”å›å€¼ä¸­çš„ä»»ä½•ä¸€ä¸ª â€” åœ¨ä»»ä½•setterè¢«è°ƒç”¨ä¹‹å‰çš„ä¸€ä¸ªï¼Œæˆ–è€…åœ¨Bå’ŒCä¸­ä¼ é€’ç»™setterçš„ä»»ä½•ä¸€ä¸ªå€¼ä¹‹å‰çš„ä¸€ä¸ªã€‚åŒæ ·åœ°ï¼Œå¯¹è±¡æœ€ç»ˆå¯èƒ½æ˜¯æ¥è‡ªBæˆ–Cçš„å€¼ï¼Œæ— æ³•åˆ¤æ–­ã€‚</p>
<blockquote>
<p>ç”±äºè§£é”åœ¨è®¾ç½®/è·å–å€¼ä¹‹å‰å’Œä¹‹åï¼ŒåŸå­å±æ€§ä¼šå—åˆ°è¾ƒå°çš„æ€§èƒ½å½±å“ã€‚</p>
</blockquote>
<p>non-atomicå±æ€§ä¸èƒ½ä¿è¯è¿”å›å€¼ã€‚å®ƒå¯ä»¥æ˜¯æ­£ç¡®çš„å€¼ã€éƒ¨åˆ†å†™å…¥çš„å€¼ï¼Œç”šè‡³æ˜¯ä¸€äº›åƒåœ¾å€¼ã€‚</p>
<p>Swiftä¸­æ²¡æœ‰åŸå­/éåŸå­å…³é”®å­—ã€‚ å½“å¤šä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®ç›¸åŒçš„å€¼æ—¶ï¼Œæˆ‘ä»¬åº”è¯¥ä½¿ç”¨é”/ä¿¡å·é‡ç­‰ä½¿ä¸€ä¸ªå±æ€§å…·æœ‰åŸå­æ€§ã€‚</p>
<p>åŸå­æ€§å±æ€§(åŸå­æ€§å’ŒéåŸå­æ€§)æ²¡æœ‰åæ˜ åœ¨ç›¸åº”çš„Swiftå±æ€§å£°æ˜ä¸­ï¼Œä½†å½“ä»Swiftè®¿é—®å¯¼å…¥çš„å±æ€§æ—¶ï¼ŒObjective-Cå®ç°çš„åŸå­æ€§ä¿è¯ä»ç„¶ä¿æŒä¸å˜ã€‚</p>
<h3 id="12-what-is-a-singleton-pattern-how-to-create-one-in-swift">12. What is a Singleton pattern? How to create one in swift?</h3>
<p>åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œå•ä¾‹å¯¹è±¡åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚å•ä¾‹çš„å­˜åœ¨ç»™äº†æˆ‘ä»¬å¥‡å¼‚çš„å…¨å±€çŠ¶æ€ã€‚è¿™äº›ä¾‹å­åŒ…æ‹¬NSNotificationCenterã€UIApplicationå’ŒNSUserDefaultsã€‚</p>
<pre><code class="language-swift">final class Singleton {
    static let sharedInstance = Singleton() 
    private init() {} // init should be private
}
</code></pre>
<p>ä»»ä½•ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡éƒ½æ˜¯å¸¸é‡ï¼Œå› æ­¤æ˜¯åªè¯»å’Œçº¿ç¨‹å®‰å…¨çš„ã€‚</p>
<p>Staticå…³é”®å­—ç¡®ä¿å®ƒåœ¨dispatch_onceå—ä¸­è¢«å»¶è¿Ÿåˆå§‹åŒ–ã€‚é»˜è®¤æƒ…å†µä¸‹Staticåœ¨å†…éƒ¨æ˜¯finalã€‚</p>
<p>dispatch_once:åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸå†…ï¼Œåªæ‰§è¡Œä¸€æ¬¡å—å¯¹è±¡ã€‚</p>
<p>å°†initæ–¹æ³•è®¾ç½®ä¸ºç§æœ‰ï¼Œè¿™æ ·å°±æ²¡æœ‰äººå¯ä»¥ç›´æ¥è®¿é—®init()æ–¹æ³•å¹¶åˆ›å»ºSingletonç±»çš„æ–°å®ä¾‹ã€‚</p>
<h3 id="13-can-enums-have-stored-properties">13. Can enums have stored properties?</h3>
<p>æšä¸¾å¯ä»¥æœ‰æ–¹æ³•ã€ä¸‹æ ‡å’Œè®¡ç®—å±æ€§ã€‚ä½†æ˜¯å®ƒä¸èƒ½å­˜å‚¨å±æ€§ã€‚</p>
<h3 id="14-can-we-make-a-let-as-weak">14. Can we make a let as weak</h3>
<p>No, ' weak 'å¿…é¡»æ˜¯ä¸€ä¸ªå¯å˜å˜é‡ï¼Œå› ä¸ºå®ƒå¯èƒ½åœ¨è¿è¡Œæ—¶å‘ç”Ÿå˜åŒ–ã€‚ å½“æˆ‘ä»¬å°†æŸé¡¹å£°æ˜ä¸ºweakæ—¶ï¼Œå®ƒå°±å˜æˆäº†å¯é€‰çš„ã€‚ å®ƒå¯èƒ½æœ‰å€¼ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰å€¼ã€‚ä¸€æ—¦æ²¡æœ‰å¯¹å®ƒçš„å¼•ç”¨ï¼Œå®ƒå°†è¢«æ”¹å˜[set to nil]ã€‚</p>
<pre><code class="language-swift">class SomeClass { }
class SomeOtherClass {
    weak let someClassObj: SomeClass? = nil 
    // error: 'weak' must be a mutable variable, because it may change at runtime
}
</code></pre>
<h3 id="15-can-we-make-a-let-as-unowned">15. Can we make a let as unowned</h3>
<p>Yes. æ— ä¸»å¼•ç”¨æ€»æ˜¯æœ‰ä¸€ä¸ªå€¼ã€‚å®ƒä¸æ˜¯å¯é€‰çš„ã€‚</p>
<blockquote>
<p>Note: æ— ä¸»å¼•ç”¨å¯ä»¥æ˜¯letæˆ–varã€‚</p>
</blockquote>
<h3 id="16-what-is-optional-chaining">16. What is Optional Chaining?</h3>
<p>å¯é€‰é“¾æ¥æ˜¯ä¸€ä¸ªæŸ¥è¯¢å’Œè°ƒç”¨å½“å‰å¯èƒ½ä¸ºnilçš„å¯é€‰å¯¹è±¡çš„å±æ€§ã€æ–¹æ³•å’Œä¸‹æ ‡çš„è¿‡ç¨‹ã€‚å¦‚æœå¯é€‰å¯¹è±¡åŒ…å«å€¼ï¼Œåˆ™å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡è°ƒç”¨æˆåŠŸ;å¦‚æœå¯é€‰å€¼ä¸ºnilï¼Œåˆ™å±æ€§ã€æ–¹æ³•æˆ–ä¸‹æ ‡è°ƒç”¨è¿”å›nilã€‚ å¤šä¸ªæŸ¥è¯¢å¯ä»¥è¢«é“¾æ¥åœ¨ä¸€èµ·ï¼Œå¦‚æœé“¾ä¸­çš„ä»»ä½•é“¾æ¥ä¸ºnilï¼Œé‚£ä¹ˆæ•´ä¸ªé“¾å°±ä¼šä¼˜é›…åœ°å¤±è´¥ã€‚</p>
<h3 id="17-bounds-vs-nativebounds">17. Bounds vs nativeBounds?</h3>
<p>nativeBounds: è¿™ä¸ªçŸ©å½¢åŸºäºç›´ç«‹æ–¹å‘çš„è®¾å¤‡ã€‚è¿™ä¸ªå€¼ä¸ä¼šéšç€è®¾å¤‡çš„æ—‹è½¬è€Œæ”¹å˜ã€‚</p>
<p>bounds: æ­¤çŸ©å½¢æ˜¯åœ¨å½“å‰åæ ‡ç©ºé—´ä¸­æŒ‡å®šçš„ï¼Œå®ƒè€ƒè™‘åˆ°å¯¹è®¾å¤‡æœ‰æ•ˆçš„ä»»ä½•ç•Œé¢æ—‹è½¬ã€‚å› æ­¤ï¼Œå½“è®¾å¤‡åœ¨çºµå‘å’Œæ¨ªå‘ä¹‹é—´æ—‹è½¬æ—¶ï¼Œè¯¥å±æ€§çš„å€¼å¯èƒ½ä¼šæ”¹å˜ã€‚</p>
<h3 id="18-how-to-resolve-strong-reference-cycles-between-class-instances">18. How to resolve Strong Reference Cycles Between Class Instances?</h3>
<p><a href="https://coding-pages-bucket-3400815-8719473-16768-590431-1304325418.cos-website.ap-hongkong.myqcloud.com/post/automatic-reference-counting-from-swift-language-guide/#WeakReferences">æ›´å¤šç»†èŠ‚</a></p>
<h4 id="weak-references-person-apartment">Weak References (Person &amp; Apartment)</h4>
<p>å¼±å¼•ç”¨æ˜¯æŒ‡æ²¡æœ‰å¯¹å®ƒæ‰€å¼•ç”¨çš„å®ä¾‹ä¿æŒå¼ºæŒæœ‰çš„å¼•ç”¨ï¼Œå› æ­¤ä¸ä¼šé˜»æ­¢ARCå¤„ç†è¢«å¼•ç”¨çš„å®ä¾‹ã€‚æ­¤è¡Œä¸ºé˜²æ­¢å¼•ç”¨æˆä¸ºå¼ºå¼•ç”¨å¾ªç¯çš„ä¸€éƒ¨åˆ†ã€‚é€šè¿‡åœ¨å±æ€§æˆ–å˜é‡å£°æ˜ä¹‹å‰æ”¾ç½®varå…³é”®å­—æ¥æŒ‡ç¤ºå¼±å¼•ç”¨ã€‚</p>
<p>Personå®ä¾‹ä»ç„¶å…·æœ‰å¯¹å…¬å¯“å®ä¾‹çš„å¼ºå¼•ç”¨ï¼Œä½†å…¬å¯“å®ä¾‹ç°åœ¨å…·æœ‰å¯¹Personå®ä¾‹çš„å¼±å¼•ç”¨ã€‚è¿™æ„å‘³ç€å½“ä½ æŠŠjohnå˜é‡çš„å¼ºå¼•ç”¨è®¾ä¸ºnilæ—¶ï¼Œå°±ä¸å†æœ‰å¯¹Personå®ä¾‹çš„å¼ºå¼•ç”¨äº†</p>
<pre><code class="language-swift">class Person {
    let name: String
    init(name: String) { self.name = name }
    var apartment: Apartment?
    deinit { print(&quot;\(name) is being deinitialized&quot;) }
}

class Apartment {
    let unit: String
    init(unit: String) { self.unit = unit }
    weak var tenant: Person?
    deinit { print(&quot;Apartment \(unit) is being deinitialized&quot;) }
}
</code></pre>
<h4 id="unowned-references-customer-creditcard">Unowned References (Customer &amp; CreditCard)</h4>
<p>ä¸å¼±å¼•ç”¨ä¸€æ ·ï¼Œæ— ä¸»å¼•ç”¨ä¸ä¼šå¯¹å®ƒæ‰€å¼•ç”¨çš„å®ä¾‹ä¿æŒå¼ºæŒæœ‰ã€‚ä½†æ˜¯ï¼Œä¸å¼±å¼•ç”¨ä¸åŒçš„æ˜¯ï¼Œå½“å¦ä¸€ä¸ªå®ä¾‹å…·æœ‰ç›¸åŒçš„ç”Ÿå­˜æœŸæˆ–æ›´é•¿çš„ç”Ÿå­˜æœŸæ—¶ï¼Œä½¿ç”¨æ— ä¸»å¼•ç”¨ã€‚é€šè¿‡åœ¨å±æ€§æˆ–å˜é‡å£°æ˜ä¹‹å‰æ”¾ç½®æ— ä¸»å…³é”®å­—æ¥æŒ‡ç¤ºæ— ä¸»å¼•ç”¨ã€‚</p>
<p>ä¸å¼±å¼•ç”¨ä¸åŒï¼Œæ— ä¸»å¼•ç”¨é¢„æœŸæ€»æ˜¯æœ‰ä¸€ä¸ªå€¼ã€‚å› æ­¤ï¼Œå°†ä¸€ä¸ªå€¼æ ‡è®°ä¸ºæ— ä¸»å¹¶ä¸æ„å‘³ç€å®ƒæ˜¯å¯é€‰çš„ï¼Œå¹¶ä¸”ARCä»ä¸å°†ä¸€ä¸ªæ— ä¸»å¼•ç”¨çš„å€¼è®¾ç½®ä¸ºnilã€‚</p>
<p>å®¢æˆ·å¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰ä¿¡ç”¨å¡ï¼Œä½†æ˜¯ä¿¡ç”¨å¡æ€»æ˜¯ä¸å®¢æˆ·ç›¸å…³è”çš„ã€‚CreditCardå®ä¾‹çš„å¯¿å‘½æ°¸è¿œä¸ä¼šè¶…è¿‡å®ƒæ‰€å¼•ç”¨çš„å®¢æˆ·ã€‚ä¸ºäº†è¡¨ç¤ºè¿™ä¸€ç‚¹ï¼ŒCustomerç±»æœ‰ä¸€ä¸ªå¯é€‰çš„cardå±æ€§ï¼Œä½†æ˜¯CreditCardç±»æœ‰ä¸€ä¸ªæ— ä¸»(ä¸”éå¯é€‰)çš„Customerå±æ€§ã€‚</p>
<p>å› ä¸ºä¿¡ç”¨å¡æ€»æ˜¯æœ‰ä¸€ä¸ªå®¢æˆ·ï¼Œä½ å°†å…¶å®¢æˆ·å±æ€§å®šä¹‰ä¸ºä¸€ä¸ªæ— ä¸»å¼•ç”¨ï¼Œä»¥é¿å…å¼ºå¼•ç”¨å¾ªç¯:</p>
<pre><code class="language-swift">class Customer {
    let name: String
    var card: CreditCard?
    init(name: String) {
        self.name = name
    }
    deinit { print(&quot;\(name) is being deinitialized&quot;) }
}

class CreditCard {
    let number: UInt64
    unowned let customer: Customer
    init(number: UInt64, customer: Customer) {
        self.number = number
        self.customer = customer
    }
    deinit { print(&quot;Card #\(number) is being deinitialized&quot;) }
}
</code></pre>
<h4 id="unowned-optional-references-department-course">Unowned Optional References (Department &amp; Course)</h4>
<p>å¯ä»¥å°†å¯¹ç±»çš„å¯é€‰å¼•ç”¨æ ‡è®°ä¸ºæ— ä¸»ã€‚æ ¹æ®ARCçš„æ‰€æœ‰æƒæ¨¡å‹ï¼Œä¸€ä¸ªæ— ä¸»çš„å¯é€‰å¼•ç”¨å’Œä¸€ä¸ªå¼±å¼•ç”¨éƒ½å¯ä»¥åœ¨ç›¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œå½“ä½ ä½¿ç”¨ä¸€ä¸ªæ— ä¸»å¯é€‰å¼•ç”¨æ—¶ï¼Œä½ æœ‰è´£ä»»ç¡®ä¿å®ƒæ€»æ˜¯æŒ‡å‘ä¸€ä¸ªæœ‰æ•ˆçš„å¯¹è±¡æˆ–è¢«è®¾ç½®ä¸ºnilã€‚</p>
<p>åœ¨ARCæ‰€æœ‰æƒæ¨¡å‹ä¸­ï¼Œä¸€ä¸ªéƒ¨é—¨æ‹¥æœ‰å®ƒçš„è¯¾ç¨‹ã€‚è¿™é—¨è¯¾æœ‰ä¸¤ä¸ªæ— ä¸»å‚è€ƒæ–‡çŒ®ï¼Œä¸€ä¸ªæ˜¯å…³äºç³»é‡Œçš„ï¼Œä¸€ä¸ªæ˜¯å…³äºå­¦ç”Ÿåº”è¯¥ä¸Šçš„ä¸‹ä¸€é—¨è¯¾çš„;ä¸€ä¸ªè¯¾ç¨‹ä¸æ‹¥æœ‰è¿™ä¸¤ä¸ªå¯¹è±¡ã€‚æ¯é—¨è¯¾ç¨‹éƒ½æ˜¯æŸä¸ªç³»çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥ç³»å±æ€§ä¸æ˜¯å¯é€‰çš„ã€‚ä½†æ˜¯ï¼Œå› ä¸ºæœ‰äº›è¯¾ç¨‹æ²¡æœ‰æ¨èçš„åç»­è¯¾ç¨‹ï¼Œæ‰€ä»¥nextCourseå±æ€§æ˜¯å¯é€‰çš„ã€‚</p>
<pre><code class="language-swift">class Department {
    var name: String
    var courses: [Course]
    init(name: String) {
        self.name = name
        self.courses = []
    }
}

class Course {
    var name: String
    unowned var department: Department
    unowned var nextCourse: Course?
    init(name: String, in department: Department) {
        self.name = name
        self.department = department
        self.nextCourse = nil
    }
}
</code></pre>
<h4 id="unowned-references-and-implicitly-unwrapped-optional-properties-country-city">Unowned References and Implicitly Unwrapped Optional Properties (Country &amp; City)</h4>
<p>Cityçš„åˆå§‹åŒ–æ˜¯ä»Countryçš„åˆå§‹åŒ–å¼å†…éƒ¨è°ƒç”¨çš„ã€‚ä½†æ˜¯ï¼Œåœ¨æ–°çš„Countryå®ä¾‹å®Œå…¨åˆå§‹åŒ–ä¹‹å‰ï¼ŒCountryçš„åˆå§‹åŒ–å™¨ä¸èƒ½å°†selfä¼ é€’ç»™Cityåˆå§‹åŒ–å™¨ï¼Œå¦‚ä¸¤é˜¶æ®µåˆå§‹åŒ–ä¸­æ‰€è¿°ã€‚</p>
<p>ä¸ºäº†å¤„ç†è¿™ä¸ªéœ€æ±‚ï¼Œæ‚¨å°†Countryçš„capitalCityå±æ€§å£°æ˜ä¸ºä¸€ä¸ªéšå¼å±•å¼€çš„å¯é€‰å±æ€§ï¼Œé€šè¿‡å…¶ç±»å‹æ³¨é‡Š(City!)æœ«å°¾çš„æ„Ÿå¹å·æ¥æŒ‡ç¤ºã€‚è¿™æ„å‘³ç€capitalCityå±æ€§çš„é»˜è®¤å€¼ä¸ºnilï¼Œå°±åƒä»»ä½•å…¶ä»–å¯é€‰å±æ€§ä¸€æ ·ï¼Œä½†å¯ä»¥è®¿é—®å®ƒè€Œä¸éœ€è¦åƒéšå¼Unwrapped optionalä¸­æè¿°çš„é‚£æ ·æ‰“å¼€å®ƒçš„å€¼ã€‚</p>
<p>å› ä¸ºcapitalCityæœ‰ä¸€ä¸ªé»˜è®¤çš„nilå€¼ï¼Œæ‰€ä»¥å½“Countryå®ä¾‹åœ¨å…¶åˆå§‹åŒ–å™¨ä¸­è®¾ç½®å…¶nameå±æ€§æ—¶ï¼Œå°±ä¼šè®¤ä¸ºä¸€ä¸ªæ–°çš„Countryå®ä¾‹å·²å®Œå…¨åˆå§‹åŒ–ã€‚è¿™æ„å‘³ç€ä¸€æ—¦è®¾ç½®äº†nameå±æ€§ï¼ŒCountryåˆå§‹åŒ–å™¨å°±å¯ä»¥å¼€å§‹å¼•ç”¨å¹¶ä¼ é€’éšå¼çš„selfå±æ€§ã€‚å› æ­¤ï¼Œå½“Countryåˆå§‹åŒ–å™¨è®¾ç½®è‡ªå·±çš„capitalCityå±æ€§æ—¶ï¼ŒCountryåˆå§‹åŒ–å™¨å¯ä»¥å°†selfä½œä¸ºCityåˆå§‹åŒ–å™¨çš„å‚æ•°ä¹‹ä¸€ä¼ é€’ã€‚</p>
<pre><code class="language-swift">class Country {
    let name: String
    var capitalCity: City!
    init(name: String, capitalName: String) {
        self.name = name
        self.capitalCity = City(name: capitalName, country: self)
    }
}

class City {
    let name: String
    unowned let country: Country
    init(name: String, country: Country) {
        self.name = name
        self.country = country
    }
}
</code></pre>
<p>æ‰€æœ‰è¿™äº›éƒ½æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸€ä¸ªè¯­å¥ä¸­åˆ›å»ºCountryå’ŒCityå®ä¾‹ï¼Œè€Œä¸éœ€è¦åˆ›å»ºå¼ºå¼•ç”¨å¾ªç¯ï¼Œå¹¶ä¸”capitalCityå±æ€§å¯ä»¥ç›´æ¥è®¿é—®ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ„Ÿå¹å·æ¥æ‰“å¼€å®ƒçš„å¯é€‰å€¼:</p>
<pre><code class="language-swift">var country = Country(name: &quot;Canada&quot;, capitalName: &quot;Ottawa&quot;)
print(&quot;\(country.name)'s capital city is called \(country.capitalCity.name)&quot;)
// Prints &quot;Canada's capital city is called Ottawa&quot;
</code></pre>
<p>æ€»ç»“ï¼š</p>
<ol>
<li>
<p>Personå’ŒApartmentç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ç§æƒ…å†µï¼Œ1.(ä½æˆ·å’Œå…¬å¯“) å…¶ä¸­å…è®¸ä¸ºnilçš„ä¸¤ä¸ªå±æ€§æœ‰å¯èƒ½å¯¼è‡´å¼ºå¼•ç”¨å¾ªç¯ã€‚è¿™ç§æƒ…å†µæœ€å¥½ä½¿ç”¨weak reference æ¥è§£å†³ã€‚</p>
</li>
<li>
<p>Customerå’ŒCreditCardç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ç§æƒ…å†µï¼Œ2. (ç”¨æˆ·å’Œä¿¡ç”¨å¡) å…¶ä¸­ä¸€ä¸ªå…è®¸ä¸ºnilçš„å±æ€§å’Œå¦ä¸€ä¸ªä¸å…è®¸ä¸ºnilçš„å±æ€§æœ‰å¯èƒ½å¯¼è‡´å¼ºå¼•ç”¨å¾ªç¯ã€‚è¿™ç§æƒ…å†µæœ€å¥½ä½¿ç”¨unowned referenceæ¥è§£å†³ã€‚</p>
</li>
<li>
<p>ç„¶è€Œï¼Œè¿˜æœ‰ç¬¬ä¸‰ç§æƒ…å†µï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ3. ï¼ˆå›½å®¶å’ŒåŸå¸‚ï¼‰ä¸¤ä¸ªå±æ€§éƒ½åº”è¯¥å§‹ç»ˆæœ‰ä¸€ä¸ªå€¼ï¼Œè€Œä¸”ä¸€æ—¦åˆå§‹åŒ–å®Œæˆï¼Œä¸¤ä¸ªå±æ€§éƒ½ä¸åº”è¯¥ä¸ºnilã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä¸€ä¸ªç±»ä¸Šçš„unownedå±æ€§ä¸å¦ä¸€ä¸ªç±»ä¸Šçš„éšå¼è§£åŒ…è£…çš„å¯é€‰å±æ€§ç»“åˆèµ·æ¥æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚</p>
</li>
</ol>
<h3 id="19-what-is-existential-in-protocol">19. What is existential in Protocol?</h3>
<p>ä¸¥æ ¼æ¥è¯´ï¼Œåœ¨ Swift ä¸­æ˜¯ä¸èƒ½æŠŠåè®®å½“ä½œä¸€ä¸ªå…·ä½“ç±»å‹æ¥ä½¿ç”¨çš„ï¼Œå®ƒä»¬åªèƒ½ç”¨æ¥çº¦æŸæ³›å‹å‚æ•°ã€‚ä½†è®©äººè¯§å¼‚çš„æ˜¯ï¼Œä¸‹é¢çš„ä»£ç å´å¯ä»¥é€šè¿‡ç¼–è¯‘ (æˆ‘ä»¬ä½¿ç”¨äº†ä¸Šé¢ä¾‹å­ä¸­çš„ DrawingContext åè®®)ï¼š</p>
<pre><code class="language-swift">let context: DrawingContext = SVG()
</code></pre>
<p>å½“æˆ‘ä»¬æŠŠåè®®å½“ä½œå…·ä½“ç±»å‹ä½¿ç”¨çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šä¸ºåè®®åˆ›å»ºä¸€ä¸ªåŒ…è£…ç±»å‹ï¼Œå«åšå­˜åœ¨ä½“ (existential)ã€‚let context: DrawingContext è¿™ç§å†™æ³•æœ¬è´¨ä¸Šå°±æ˜¯ç±»ä¼¼ let context: Any è¿™ç§å†™æ³•çš„è¯­æ³•ç³–ã€‚å°½ç®¡è¿™ç§è¯­æ³•å¹¶ä¸å­˜åœ¨ï¼Œç¼–è¯‘å™¨ä¼šåˆ›å»ºä¸€ä¸ª (32 å­—èŠ‚çš„) Any ç›’å­ï¼Œå¹¶åœ¨å…¶ä¸­ä¸ºç±»å‹å®ç°çš„æ¯ä¸ªåè®®æ·»åŠ ä¸€ä¸ª 8 å­—èŠ‚çš„åè®®ç›®å‡»è€…ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥éªŒè¯è¿™ä¸ªç»“æœï¼š</p>
<pre><code class="language-swift">MemoryLayout&lt;Any&gt;.size // 32
MemoryLayout&lt;DrawingContext&gt;.size // 40
</code></pre>
<p>ä¸ºåè®®åˆ›å»ºçš„è¿™ä¸ªç›’å­ä¹Ÿå«åš å­˜åœ¨ä½“å®¹å™¨ (existential container)ã€‚è¿™æ˜¯ç¼–è¯‘å™¨å¿…é¡»è¦åšçš„äº‹æƒ…ï¼Œå› ä¸ºå®ƒéœ€è¦åœ¨ç¼–è¯‘æœŸç¡®è®¤ç±»å‹çš„å¤§å°ã€‚ä¸åŒçš„ç±»å‹è‡ªèº«å¤§å°æœ‰å·®å¼‚ (ä¾‹å¦‚ï¼šæ‰€æœ‰çš„ç±»éƒ½æ˜¯ä¸€ä¸ªæŒ‡é’ˆçš„å¤§å°ï¼Œè€Œç»“æ„ä½“å’Œæšä¸¾çš„å¤§å°åˆ™ä¾èµ–å®ƒä»¬çš„å®é™…å†…å®¹)ï¼Œè¿™äº›ç±»å‹å®ç°äº†ä¸€ä¸ªåè®®çš„æ—¶å€™ï¼ŒæŠŠåè®®åŒ…è£…åœ¨å­˜åœ¨ä½“å®¹å™¨ä¸­å¯ä»¥è®©ç±»å‹çš„å°ºå¯¸ä¿æŒå›ºå®šï¼Œç¼–è¯‘å™¨ä¹Ÿå°±èƒ½ç¡®å®šå¯¹è±¡çš„å†…å­˜å¸ƒå±€äº†ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å­˜åœ¨ä½“å®¹å™¨çš„å¤§å°ä¼šéšç€ç±»å‹å®ç°åè®®çš„å¢å¤šè€Œå¢é•¿ã€‚ä¾‹å¦‚ï¼ŒCodable æ˜¯ Encodable å’Œ Decodable çš„ç»„åˆï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬å¯ä»¥é¢„æœŸ Codable å­˜åœ¨ä½“çš„å¤§å°æ˜¯ 32 å­—èŠ‚çš„ Any å®¹å™¨ï¼ŒåŠ ä¸Š 2 ä¸ª 8 å­—èŠ‚çš„åè®®ç›®å‡»è€…</p>
<pre><code class="language-swift">MemoryLayout&lt;Codable&gt;.size // 48
</code></pre>
<p>æœ‰æ—¶ï¼Œå­˜åœ¨ä½“å’Œå¸¦æœ‰ç±»å‹çº¦æŸçš„æ³›å‹å‚æ•°æ˜¯å¯ä»¥äº¤æ¢ä½¿ç”¨çš„ã€‚æ¥çœ‹ä¸‹é¢è¿™ä¸¤ä¸ªå‡½æ•°ï¼š</p>
<pre><code class="language-swift">func encode1(x: Encodable) { }
func encode2&lt;E: Encodable&gt;(x: E) { }
</code></pre>
<p>å°½ç®¡è¿™ä¸¤ä¸ªå‡½æ•°éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå®ç°äº† Encodable çš„ç±»å‹è°ƒç”¨ï¼Œä½†è®©äººè¯§å¼‚çš„æ˜¯ï¼Œå®ƒä»¬å¹¶ä¸å®Œå…¨ç›¸åŒã€‚å¯¹äº encode1 æ¥è¯´ï¼Œç¼–è¯‘å™¨ä¼šæŠŠå‚æ•°åŒ…è£…åˆ° Encodable çš„å­˜åœ¨ä½“å®¹å™¨é‡Œã€‚è¿™ä¸ªåŒ…è£…ä¸ä»…ä¼šå¸¦æ¥ä¸€äº›æ€§èƒ½å¼€é”€ï¼Œå¦‚æœè¦åŒ…è£…çš„å€¼è¿‡å¤§ä»¥è‡³äºæ— æ³•ç›´æ¥å­˜æ”¾åˆ°å­˜åœ¨ä½“é‡Œï¼Œå°±è¿˜éœ€è¦å¼€è¾Ÿé¢å¤–çš„å†…å­˜ç©ºé—´ã€‚å¯èƒ½æ›´é‡è¦çš„æ˜¯ï¼Œè¿™è¿˜ä¼šé˜»æ­¢ç¼–è¯‘å™¨çš„è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œå› ä¸ºå¯¹è¢«åŒ…è£…ç±»å‹çš„æ‰€æœ‰æ–¹æ³•è°ƒç”¨éƒ½åªèƒ½ç»è¿‡å­˜åœ¨ä½“ä¸­çš„åè®®ç›®å‡»è€…è¡¨å®Œæˆã€‚</p>
<p>è€Œå¯¹äºæ³›å‹å‡½æ•°ï¼Œç¼–è¯‘å™¨å¯ä»¥ä¸ºéƒ¨åˆ†æˆ–è€…æ‰€æœ‰ä¼ é€’ç»™ encode2 çš„å‚æ•°ç±»å‹ç”Ÿæˆä¸€ä¸ªç‰¹åŒ–çš„ç‰ˆæœ¬ã€‚è¿™äº›ç‰¹åŒ–ç‰ˆæœ¬çš„æ€§èƒ½ï¼Œå’Œæˆ‘ä»¬æ‰‹å·¥å»ä¸ºè¿™äº›ç±»å‹é‡è½½ encode2 æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚è€Œç›¸æ¯” encode1ï¼Œæ³›å‹æ–¹å¼å®ç°çš„ç¼ºç‚¹ï¼Œåˆ™æ˜¯æ›´é•¿çš„ç¼–è¯‘æ—¶é—´ä»¥åŠæ›´å¤§çš„äºŒè¿›åˆ¶ç¨‹åºã€‚</p>
<h3 id="20-explain-existential-and-associated-type-about-protocol">20. Explain existential and associated type about Protocol</h3>
<p>åœ¨ Swift 5 é‡Œï¼Œå­˜åœ¨ä½“åªé’ˆå¯¹é‚£äº›æ²¡æœ‰å…³è”ç±»å‹å’Œ Self çº¦æŸçš„åè®®ã€‚ä¸ºäº†äº†è§£ä¸ºä»€ä¹ˆï¼Œæ¥çœ‹ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p>
<pre><code class="language-swift">let collections: [Collection] = [&quot;foo&quot;, [1]]
// é”™è¯¯: 'Collection' åªèƒ½ç”¨åšæ³›å‹å‚æ•°çº¦æŸ
// å› ä¸ºå®ƒåŒ…å«äº† Self æˆ–å…³è”ç±»å‹çº¦å®šã€‚
</code></pre>
<p>è€Œå¯¹äºé‚£äº›åŒ…å« Self çº¦æŸçš„åè®®ï¼Œè¿™ä¸ªé™åˆ¶æ˜¯ç±»ä¼¼çš„ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä¸‹é¢è¿™æ®µä»£ç ï¼š</p>
<pre><code class="language-swift">let cmp: Comparable = 15 // ç¼–è¯‘é”™è¯¯
</code></pre>
<p>å®šä¹‰åœ¨ Comparable ä¸­çš„æ“ä½œç¬¦ (ä»¥åŠä» Equatable ä¸­ç»§æ‰¿æ¥çš„æ“ä½œç¬¦) å¸Œæœ›ç”¨äºæ¯”è¾ƒçš„ä¸¤ä¸ªå‚æ•°çš„ç±»å‹æ˜¯å®Œå…¨ä¸€è‡´çš„ã€‚å¦‚æœå…è®¸å®šä¹‰ Comparable ç±»å‹çš„å˜é‡ï¼Œä½ å°±å¯èƒ½ä¼šç”¨ Comparable ä¸­çš„ API æ¥æ¯”è¾ƒå®ƒä»¬ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code class="language-swift">(15 as Comparable) &lt; (&quot;16&quot; as Comparable)
// é”™è¯¯ï¼šäºŒè¿›åˆ¶æ“ä½œç¬¦ '&lt;' ä¸èƒ½ç”¨äºä¸¤ä¸ª 'Comparable' æ“ä½œæ•°ã€‚
</code></pre>
<p>ä½†æ˜¯ï¼Œè¿™æ ·çš„å†™æ³•å®Œå…¨ä¸åˆç†ï¼Œå› ä¸ºç›´æ¥æ¯”è¾ƒå­—ç¬¦ä¸²å’Œæ•´æ•°æ˜¯ä¸å¯èƒ½çš„ã€‚å› æ­¤ï¼Œç¼–è¯‘å™¨ç¦æ­¢ä¸ºåŒ…å«å…³è”ç±»å‹çº¦æŸçš„åè®® (æˆ–è€…ä½¿ç”¨äº† Self çš„åè®®ï¼Œæœ¬è´¨ä¸Šè¿™ä¹Ÿæ˜¯ä¸€ç§å…³è”ç±»å‹) ç”Ÿæˆå­˜åœ¨ä½“ã€‚</p>
<h3 id="21-explain-the-difference-between-methods-declared-in-the-protocol-and-those-declared-in-the-protocol-extension">21. Explain the difference between methods declared in the Protocol and those declared in the Protocol extension</h3>
<pre><code class="language-swift">protocol MyProtocol {
    func teach()
}
extension MyProtocol{
    func teach(){ print(&quot;MyProtocol&quot;) }
}
class MyClass: MyProtocol{
    func teach(){ print(&quot;MyClass&quot;) }
}
let object: MyProtocol = MyClass()
object.teach()
let object1: MyClass = MyClass()
object1.teach()

//æ‰“å°è¾“å‡º
MyClass
MyClass

/*
1. å¯¹è±¡ object ğŸ‘‰ æ–¹æ³• teach çš„è°ƒç”¨æ˜¯é€šè¿‡witness_methodè°ƒç”¨
2. è€Œå¯¹è±¡ object1 ğŸ‘‰ æ–¹æ³• teach çš„è°ƒç”¨æ˜¯é€šè¿‡class_methodè°ƒç”¨
*/

//å¦‚æœå»æ‰åè®®ä¸­çš„å£°æ˜å‘¢ï¼Ÿæ‰“å°ç»“æœæ˜¯ä»€ä¹ˆ
protocol MyProtocol {
}
extension MyProtocol{
    func teach(){ print(&quot;MyProtocol&quot;) }
}
class MyClass: MyProtocol{
    func teach(){ print(&quot;MyClass&quot;) }
}
let object: MyProtocol = MyClass()
object.teach() 

let object1: MyClass = MyClass()
object1.teach()

//æ‰“å°è¾“å‡º
MyProtocol
MyClass
/*
ç¬¬ä¸€ä¸ªæ‰“å° MyProtocolï¼Œæ˜¯å› ä¸ºè°ƒç”¨çš„æ˜¯åè®®æ‰©å±•ä¸­çš„ teach æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„åœ°å€æ˜¯åœ¨ç¼–è¯‘æ—¶æœŸå°±å·²ç»ç¡®å®šçš„ï¼Œå³é€šè¿‡é™æ€å‡½æ•°åœ°å€è°ƒåº¦
ç¬¬äºŒä¸ªæ‰“å° MyClassï¼ŒåŒä¸Šä¸ªä¾‹å­ä¸€æ ·ï¼Œæ˜¯ç±»çš„å‡½æ•°è¡¨è°ƒç”¨
*/
</code></pre>
<p>ä¸åŒç‚¹</p>
<ul>
<li>å£°æ˜åœ¨Protocolä¸­çš„æ–¹æ³•ï¼Œåœ¨åº•å±‚ä¼šå­˜å‚¨åœ¨PWTï¼ŒPWTä¸­çš„æ–¹æ³•ä¹Ÿæ˜¯é€šè¿‡class_methodï¼Œå»ç±»çš„V-Tableä¸­æ‰¾åˆ°å¯¹åº”çš„æ–¹æ³•çš„è°ƒåº¦ã€‚</li>
<li>å¦‚æœæ²¡æœ‰å£°æ˜åœ¨Protocolä¸­çš„å‡½æ•°ï¼Œåªæ˜¯é€šè¿‡Extensionæä¾›äº†ä¸€ä¸ªé»˜è®¤å®ç°ï¼Œå…¶å‡½æ•°åœ°å€åœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­å°±å·²ç»ç¡®å®šäº†ï¼Œå¯¹äºéµå®ˆåè®®çš„ç±»æ¥è¯´ï¼Œè¿™ç§æ–¹æ³•æ˜¯æ— æ³•é‡å†™çš„ã€‚</li>
</ul>
<h3 id="22-how-to-type-erasure-using-closures-replace-using-class-in-swift">22. How to type erasure using closures replace using class in Swift</h3>
<pre><code class="language-swift">protocol ModelLoading {
    associatedtype Model

    func load(completionHandler: (Result&lt;Model&gt;) -&gt; Void)
}

class ViewController: UIViewController {
    init(modelLoader: ModelLoading) {
        ...
    }
}
</code></pre>
<blockquote>
<p>Protocol 'ModelLoading' can only be used as a generic constraint because it as Self or associated type requirements</p>
</blockquote>
<h4 id="1-é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…ç±»æ¥å®ç°ç±»å‹æ“¦é™¤">1. é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…ç±»æ¥å®ç°ç±»å‹æ“¦é™¤</h4>
<pre><code class="language-swift">class AnyModelLoader&lt;T&gt;: ModelLoading {
    typealias CompletionHandler = (Result&lt;T&gt;) -&gt; Void

    private let loadingClosure: (CompletionHandler) -&gt; Void

    init&lt;L: ModelLoading&gt;(loader: L) where L.Model == T {
        loadingClosure = loader.load
    }

    func load(completionHandler: CompletionHandler) {
        loadingClosure(completionHandler)
    }
}

class ViewController: UIViewController {
    private let modelLoader: AnyModelLoader&lt;MyModel&gt;

    init&lt;T: ModelLoading&gt;(modelLoader: T) where T.Model == MyModel {
        self.modelLoader = AnyModelLoader(loader: modelLoader)
        super.init(nibName: nil, bundle: nil)
    }
}
</code></pre>
<p>ä¸Šé¢çš„æŠ€æœ¯å·¥ä½œå¾—éå¸¸å¥½ï¼Œä½†æ˜¯å®ƒç¡®å®æ¶‰åŠäº†ä¸€ä¸ªé¢å¤–çš„æ­¥éª¤ï¼Œç»™æˆ‘ä»¬çš„ä»£ç å¢åŠ äº†ä¸€äº›å¤æ‚æ€§ã€‚ä½†å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨è§†å›¾æ§åˆ¶å™¨ä¸­åšåŸºäºé—­åŒ…çš„ç±»å‹æ“¦é™¤ -ä¸å¿…å¼•å…¥AnyModelLoaderç±»ã€‚</p>
<h4 id="2-é€šè¿‡é—­åŒ…å®ç°ç±»å‹æ“¦é™¤">2. é€šè¿‡é—­åŒ…å®ç°ç±»å‹æ“¦é™¤</h4>
<p>ç„¶åï¼Œæˆ‘ä»¬çš„è§†å›¾æ§åˆ¶å™¨å°±ä¼šå˜æˆè¿™æ ·:</p>
<pre><code class="language-swift">class ViewController: UIViewController {
    private let loadModel: ((Result&lt;MyModel&gt;) -&gt; Void) -&gt; Void

    init&lt;T: ModelLoading&gt;(modelLoader: T) where T.Model == MyModel {
        loadModel = modelLoader.load
        super.init(nibName: nil, bundle: nil)
    }
}
</code></pre>
<p>ä¸æˆ‘ä»¬çš„ç±»å‹åˆ é™¤ç±»AnyModelLoaderä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥å°†loadå‡½æ•°çš„å®ç°ä½œä¸ºä¸€ä¸ªé—­åŒ…å¼•ç”¨ï¼Œç„¶ååœ¨è§†å›¾æ§åˆ¶å™¨ä¸­ä¿å­˜å¯¹å®ƒçš„å¼•ç”¨ã€‚ç°åœ¨ï¼Œå½“æˆ‘ä»¬æƒ³è¦åŠ è½½ä¸€ä¸ªæ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬åªéœ€è°ƒç”¨loadModelï¼Œå°±åƒæˆ‘ä»¬å¯¹å…¶ä»–ä»»ä½•å‡½æ•°æˆ–é—­åŒ…ä¸€æ ·:</p>
<pre><code class="language-swift">override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)

    loadModel { result in
        switch result {
        case .success(let model):
            render(model)
        case .error(let error):
            render(error)
        }
    }
}
</code></pre>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>æ€»ä½“æ¥è¯´ï¼Œå½“ç¼–å†™ä¸€ä¸ªç±»å‹æ¶ˆé™¤å™¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¦ç¡®ä¿å®ƒåŒ…å«äº†åè®®çº¦æŸçš„æ‰€æœ‰æ–¹æ³•ã€‚å°½ç®¡ç¼–è¯‘å™¨å¯ä»¥åœ¨è¿™ä»¶äº‹æƒ…ä¸Šå¸®æˆ‘ä»¬ä¸€æŠŠï¼Œä½†å®ƒä¼šæ”¾è¿‡é‚£äº›å¸¦æœ‰é»˜è®¤å®ç°çš„åè®®æ–¹æ³•ã€‚åœ¨ç±»å‹æ¶ˆé™¤å™¨é‡Œï¼Œæˆ‘ä»¬ä¸èƒ½ä¾èµ–è¿™äº›é»˜è®¤å®ç°ï¼Œè€Œæ˜¯è¦å§‹ç»ˆæŠŠæ–¹æ³•è°ƒç”¨è½¬å‘åˆ°è¢«éšè—çš„åŸå§‹ç±»å‹ä¸Šï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯æœ‰å¯èƒ½è¢«å®šåˆ¶çš„ã€‚</p>
<h3 id="23-how-to-create-a-mixed-type-array-in-swift">23. How to create a mixed-type array in Swift?</h3>
<h4 id="1-ä½¿ç”¨any">1. ä½¿ç”¨Any</h4>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸€ä¸ªé€‰æ‹©æ˜¯å®Œå…¨ç»•è¿‡Swiftçš„å¼ºç±»å‹ç³»ç»Ÿï¼Œä½¿ç”¨Any(å­—é¢æ„æ€æ˜¯ä»»ä½•ç±»å‹)ä½œä¸ºæˆ‘ä»¬æƒ³è¦åˆ›å»ºçš„æ•°ç»„çš„å…ƒç´ ç±»å‹-åƒè¿™æ ·:</p>
<pre><code class="language-swift">func loadItems() -&gt; [Any] {
    var items = [Any]()
    ...
    return items
}
</code></pre>
<p>è¿™å¹¶ä¸æ˜¯å¾ˆå¥½ï¼Œå› ä¸ºæˆ‘ä»¬æ€»æ˜¯éœ€è¦æ‰§è¡Œç±»å‹è½¬æ¢æ¥å®é™…ä½¿ç”¨è¿”å›æ•°ç»„åŒ…å«çš„ä»»ä½•å®ä¾‹-è¿™ä¸¤è€…éƒ½ä½¿äº‹æƒ…æ›´ç¬¨æ‹™ï¼Œæ›´è„†å¼±ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å¾—åˆ°ä»»ä½•ç¼–è¯‘æ—¶ä¿è¯ï¼Œæˆ‘ä»¬çš„æ•°ç»„å°†å®é™…åŒ…å«ä»€ä¹ˆæ ·çš„å®ä¾‹ã€‚</p>
<h4 id="2-ä½¿ç”¨protocol">2. ä½¿ç”¨Protocol</h4>
<p>å¦ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ä¸€äº›é¢å‘åè®®çš„ç¼–ç¨‹ï¼Œå¹¶å°†è§†é¢‘å’Œç…§ç‰‡ä¹‹é—´çš„å…±åŒéƒ¨åˆ†æŠ½è±¡åˆ°ä¸€ä¸ªåè®®ä¸­ï¼Œä½¿è¿™ä¸¤ç§ç±»å‹éƒ½ç¬¦åˆ:</p>
<pre><code class="language-swift">protocol Item {
    var id: UUID { get }
    var title: String { get }
    var description: String { get }
    var url: URL { get }
}

extension Video: Item {}
extension Photo: Item {}
</code></pre>
<p>è¿™å°±å¥½å¤šäº†ï¼Œå› ä¸ºæˆ‘ä»¬ç°åœ¨å¯ä»¥ç»™loadItemså‡½æ•°ä¸€ä¸ªå¼ºè¿”å›ç±»å‹ï¼Œæ–¹æ³•æ˜¯ç”¨ä¸Šé¢çš„Itemåè®®æ›¿æ¢Any -è¿™åè¿‡æ¥è®©æˆ‘ä»¬åœ¨è®¿é—®æ•°ç»„å…ƒç´ æ—¶ä½¿ç”¨è¯¥åè®®ä¸­å®šä¹‰çš„ä»»ä½•å±æ€§:</p>
<pre><code class="language-swift">func loadItems() -&gt; [Item] {
    ...
}
</code></pre>
<h5 id="protocol-ç»§æ‰¿">Protocol ç»§æ‰¿</h5>
<p>ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬åœ¨æŸä¸ªæ—¶å€™éœ€è¦å‘Itemæ·»åŠ ä¸€ä¸ªè¦æ±‚ï¼Œä½¿å…¶æˆä¸ºæ³›å‹(generic)ï¼Œé‚£ä¹ˆä¸Šè¿°æ–¹æ³•å¯èƒ½ä¼šå‡ºç°ä¸€äº›é—®é¢˜â€”â€”ä¾‹å¦‚ï¼Œè®©å®ƒç»§æ‰¿æ ‡å‡†åº“çš„å¯è¯†åˆ«åè®®(Identifiable)(åŒ…å«ä¸€ä¸ªç›¸å…³ç±»å‹)çš„è¦æ±‚:</p>
<pre><code class="language-swift">protocol Item: Identifiable {
    ...
}
</code></pre>
<p>å°½ç®¡Videoå’ŒPhotoéƒ½å·²ç»æ»¡è¶³äº†æˆ‘ä»¬æ–°æ·»åŠ çš„éœ€æ±‚(å› ä¸ºå®ƒä»¬éƒ½å®šä¹‰äº†idå±æ€§)ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å°è¯•ç›´æ¥å¼•ç”¨Itemåè®®æ—¶ï¼Œæˆ‘ä»¬ç°åœ¨ä¼šå¾—åˆ°ä»¥ä¸‹é”™è¯¯ï¼Œå°±åƒæˆ‘ä»¬åœ¨loadItemså‡½æ•°ä¸­æ‰€åšçš„é‚£æ ·:</p>
<blockquote>
<p>åè®®â€œItemâ€åªèƒ½ä½œä¸ºé€šç”¨çº¦æŸä½¿ç”¨ å› ä¸ºå®ƒæœ‰Selfæˆ–ç›¸å…³çš„ç±»å‹éœ€æ±‚ã€‚</p>
</blockquote>
<h5 id="protocol-ç»„åˆ">Protocol ç»„åˆ</h5>
<p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯å°†ç¬¦åˆIdentifiableçš„è¦æ±‚ä¸æˆ‘ä»¬è‡ªå·±çš„å±æ€§è¦æ±‚åˆ†å¼€ -ä¾‹å¦‚ï¼Œé€šè¿‡ç§»åŠ¨è¿™äº›å±æ€§åˆ°ä¸€ä¸ªAnyItemåè®®ï¼Œç„¶åç»„æˆä¸€ä¸ªæ–°çš„åè®®ä¸Identifiableï¼Œä»¥å½¢æˆä¸€ä¸ªItem type alias:</p>
<pre><code class="language-swift">protocol AnyItem {
    var id: UUID { get }
    var title: String { get }
    var description: String { get }
    var url: URL { get }
}

typealias Item = AnyItem &amp; Identifiable
</code></pre>
<p>ä¸Šè¿°æ–¹æ³•çš„ç¾å¦™ä¹‹å¤„åœ¨äºï¼Œæˆ‘ä»¬çš„Videoå’ŒPhotoç±»å‹ä»ç„¶å¯ä»¥ç¬¦åˆItemï¼Œå°±åƒä»¥å‰ä¸€æ ·ï¼Œè¿™ä½¿å®ƒä»¬ä¸æ‰€æœ‰éœ€è¦Identifiableå®ä¾‹çš„ä»£ç å…¼å®¹(å¦‚swifituiçš„ForEachå’ŒList)</p>
<pre><code class="language-swift">func loadItems() -&gt; [AnyItem] {
    ...
}
</code></pre>
<h4 id="3-ä½¿ç”¨enum">3. ä½¿ç”¨Enum</h4>
<p>ä¸Šé¢çš„å¦ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨æšä¸¾æ¥å»ºæ¨¡ä¸¤ä¸ªç‹¬ç«‹çš„å˜é‡ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="language-swift">enum Item {
    case video(Video)
    case photo(Photo)
}
</code></pre>
<p>å› ä¸ºVideoå’ŒPhotoçš„idå±æ€§éƒ½ä½¿ç”¨äº†ç›¸åŒçš„ç±»å‹(å†…ç½®çš„UUIDç±»å‹)ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥è®©ä¸Šé¢çš„æšä¸¾ä¹Ÿç¬¦åˆIdentifiable-é€šè¿‡è®©å®ƒä½œä¸ºå½“å‰åŒ…è£…çš„åº•å±‚æ¨¡å‹å®ä¾‹çš„ä»£ç†:</p>
<pre><code class="language-swift">extension Item: Identifiable {
    var id: UUID {
        switch self {
        case .video(let video):
            return video.id
        case .photo(let photo):
            return photo.id
        }
    }
}
</code></pre>
<h4 id="4-ç»„åˆä½¿ç”¨enumå’Œstruct">4. ç»„åˆä½¿ç”¨Enumå’ŒStruct</h4>
<p>ä¸Šè¿°æ¨¡å¼çš„å¦ä¸€ä¸ªå˜ä½“æ˜¯å°†Itemå®ç°ä¸ºä¸€ä¸ªç»“æ„ä½“ï¼Œå°†ä¸¤ä¸ªå˜ä½“ä¹‹é—´çš„æ‰€æœ‰å…±åŒå±æ€§ç§»åŠ¨åˆ°è¯¥ç»“æ„ä½“ä¸­ï¼Œç„¶ååªå¯¹è¿™ä¸¤ä¸ªå˜ä½“ä¸­å”¯ä¸€çš„å±æ€§ä½¿ç”¨æšä¸¾â€”â€”åƒè¿™æ ·:</p>
<pre><code class="language-swift">struct Item: Identifiable {
    let id: UUID
    var title: String
    var description: String
    var url: URL
    var metadata: Metadata
}

extension Item {
    enum Metadata {
        case video(length: TimeInterval)
        case photo(size: CGSize)
    }
}
</code></pre>
<p>æœ€åä¸¤ç§æ–¹æ³•çš„ä¼˜ç‚¹æ˜¯ï¼Œå®ƒä»¬å®é™…ä¸Šè®©æˆ‘ä»¬å°†å¼‚æ„æ•°ç»„è½¬æ¢ä¸ºåŒæ„æ•°ç»„ï¼Œå› ä¸ºItemç°åœ¨è¢«å®ç°ä¸ºç‹¬ç«‹çš„ç±»å‹ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†è¿™äº›æ•°ç»„ä¼ é€’åˆ°è¦æ±‚æ‰€æœ‰å…ƒç´ éƒ½æ˜¯ç›¸åŒç±»å‹çš„å‡½æ•°ä¸­â€”â€”å°±åƒã€ŠåŸºç¡€ã€‹ä¸­å…³äºæ³›å‹çš„æ–‡ç« ä¸­çš„è¿™ä¸ª:</p>
<pre><code class="language-swift">extension String {
    mutating func appendIDs&lt;T: Identifiable&gt;(of values: [T]) {
        for value in values {
            append(&quot; \(value.id)&quot;)
        }
    }
}
</code></pre>
<h3 id="ç›¸å…³èµ„æº">ç›¸å…³èµ„æºï¼š</h3>
<ol>
<li>
<p>æ–‡ç« ï¼š<a href="https://coding-pages-bucket-3400815-8719473-16768-590431-1304325418.cos-website.ap-hongkong.myqcloud.com/post/swift-advanced-protocol-xiang-jie">Swift è¿›é˜¶: Protocol è¯¦è§£</a></p>
</li>
<li>
<p>æ–‡ç« ï¼š<a href="https://coding-pages-bucket-3400815-8719473-16768-590431-1304325418.cos-website.ap-hongkong.myqcloud.com/post/type-erasure-using-closures-in-swift/">Type erasure using closures in Swift</a></p>
</li>
</ol>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://kayouyou.github.io/tag/1UYNOQrST/" class="tag">
                    interview
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">ä¸‹ä¸€ç¯‡</div>
                <a href="https://kayouyou.github.io/post/50-dao-ios-mian-shi-wen-da-6/">
                  <h3 class="post-title">
                    50é“iOSé¢è¯•é—®ç­” - 6
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>


  <script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/10.6.0/highlight.min.js"></script>
  <script>
    hljs.initHighlightingOnLoad()
  </script>





  </body>
</html>
